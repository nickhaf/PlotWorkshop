---
title: "Was ist eine gute Grafik?"
format: letterbox-revealjs
---

```{r}
#| echo: false
library(quartets)
library(tidyverse)
source(here::here("src", "themes.R"))
```


## 

![](./images/mcCandless.png)
::: aside

:::

## Eine gute Grafik sollte ...

... eine Geschichte erzählen
... helfen, auf das Wesentliche zu konzentrieren (datasaurus)
... die Zusammenhänge möglichst "umfänglich" darzustellen. 
... (cool aussehen)
... Kultur-, Personen-, Zeitunabhängig sein, soweit wie möglich

## Datasaurus Dozen ([`quartets`-Paket](https://github.com/r-causal/quartets))

```{r}
#| echo: false

datasaurus_dozen |>
  group_by(dataset) |>
  summarise(mean_x = mean(x),
            var_x = var(x),
            mean_y = mean(y),
            var_y = var(y),
            cor = cor(x, y)) |>
  knitr::kable(digits = 2)
```

## 

```{r}
#| echo: false
#| fig-height: 8
#| fig-width: 12

ggplot(datasaurus_dozen, aes(x = x, y = y)) +
  geom_smooth(method = "lm", formula = "y ~ x") +
  facet_wrap(~dataset) +
  theme_bg() +
  ylim(0, 100)

```

## 

```{r}
#| echo: false
#| fig-height: 8
#| fig-width: 12


ggplot(datasaurus_dozen, aes(x = x, y = y)) +
  geom_smooth(method = "lm", formula = "y ~ x") +
  facet_wrap(~dataset, ncol = 5) +
  geom_point() +
  theme_bg() +
  ylim(0, 100)


```

## Darstellung von Größen

## Manipulation von Achsen

## Manipulation des Bildformats

```{r}
set.seed(42)
my_weight <- data.frame(
  month = factor(c("Januar", "Februar", "März", "April", "Mai", "Juni", "Juli", "August", "September", "Oktober", "November", "Dezember"),
                 levels = c("Januar", "Februar", "März", "April", "Mai", "Juni", "Juli", "August", "September", "Oktober", "November", "Dezember"), 
                 ordered = TRUE), 
  weight = rnorm(12, 90, 5)/1000, 
  group = rep(1, 12)
)

ggplot(my_weight, 
       aes(x = month, y = weight, group = group)) +
  geom_point() +
  geom_line() +
  labs(title = "Mein Gewicht 2024",
       subtitle = "In metrischen Tonnen", 
       x = "Monat", 
       y = "Gewicht in t") +
  ylim(0, 1000) + 
  theme_bg() +
  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))
```

## Election Plot
https://storymaps.arcgis.com/stories/0e636a652d44484b9457f953994b212b
Vielleicht mit Bundestagswahl?

## Fehlender Kontext
Ausschnitt aus Zeitreihe, ohne KOntext schwer zu Interpretieren. 
Irgendwas mit Schuldenpaket z.B.?
Am besten noch mit anderen Kategorien dazu
- Co2 Data insgesamt ohne Population zeigen

## Verteilungen Plotten

## Eine Grafik ist kann nur einen Teil der Zusammenhänge darstellen

Im  Schlechtesten Fall für Manipulation nutzbar



## Black swann

## Was mögt ihr an dieser Grafik/nicht?


## Plot-Typen

## Choosing the correct plot
https://www.data-to-viz.com/

## Pulikum

## Geschichte
- Gleiche sache auf verschiedene Arten darstellen -> was wirkt am meisten?  


## Purpose
- Exploratory vs. Explanatory
- Kann oft über reines Zeigen der Daten hinausgehen. 


## 

```{r}
#| echo: false
#| eval: false

library(rvest)
library(httr)
library(polite)

url <- "https://en.wikipedia.org/wiki/Gun_ownership"
url_bow <- polite::bow(url)
url_bow

firearm_df <- polite::scrape(url_bow) %>% 
  rvest::html_nodes("table.wikitable") %>% 
  rvest::html_table(fill = TRUE) %>% 
  as.data.frame() %>% 
  rename(country = "Countries.and.territories", "guns" = "Estimate.of.civilian.firearms.per.100.people") %>% 
  select(country, guns)

saveRDS(firearm_df, here::here("sessions", "good_plots","data", "firearm_df.rds"))
```

```{r}
#| echo: false

firearm_df <- readRDS(here::here("sessions", "good_plots","data", "firearm_df.rds"))
df <- data.frame(
  country = c("United States", "Germany", "France", "Canada", "Finland", "Austria", "Australia", "Italy", "Netherlands", "Switzerland"), 
  mass_shootings = c(109, 5, 6, 4, 3, 2, 1, 2, 2, 2)) %>% 
  left_join(firearm_df) %>% 
  mutate(labels = case_when(country == "United States" ~ "USA", 
                            country == "Germany" ~ "Germany", 
                            country == "Switzerland" ~ "Switzerland", 
                            country == "Netherlands" ~ "Netherlands", 
                            TRUE ~ NA))
```


```{r}
#| echo: false
#| fig-height: 7
#| fig-width: 12

ggplot(data = df, 
       aes(x = guns, y = mass_shootings, label = labels)) +
  geom_point(aes(colour = ifelse(country == "United States", "USA", "noUSA")), size = 5) +
  scale_colour_manual(values = c("lightgrey", "red")) +
  geom_text(vjust = 2, size = 5, color = '#01364C') +
  theme_bg() +
  theme(legend.position="none") +
  xlab("Guns per 100 Civilians") +
  ylab("Number of Mass Shootings 2002 - 2022")
```


::: aside
Data from [Rockefeller Institute](https://rockinst.org/blog/public-mass-shootings-around-the-world-prevalence-context-and-prevention/) and [Wikipedia](https://en.wikipedia.org/wiki/Gun_ownership). 
:::


## Tufte
- So wenig Tinte wie möglich nutzen
- Alles nicht essentielle entfernen
- Redundanzen entferenen  

Beispiel zeigen: Eins ist aufgeblasen, man braucht Zeit zur Orientierung. Ein anderes theme_tufte

## Data-ink ratio
Beispiel zum Minimieren zeigen
- Raincloud plots

## Caveats
https://www.data-to-viz.com/caveats.html

Immer einen Plot zeigen, dann zusammen überlgen was daran schlecht ist, was verbessert werden kann. 


## Farben
Ganglienzellen übertragen keine Informationen über absolute Helligkeit,
sondern über relative Helligkeit.
‣ Wie stark unterscheiden sich zwei Bereiche in ihrer Helligkeit?
‣ Wie stark hat sich eine Helligkeit gerade geändert?
Allgemeine Lehre daraus:
‣ Visualisierung kann nicht gut darin sein, absolute Werte zu
kommunizieren (Tabellen können das besser)
‣ Hingegen ist das visuelle System (und das Gehirn allgemein) extrem gut
darin, Unterschiede und Veränderungen zu erkennen
--> Beispiel bringen (Simultankontrast)

- Graustufen nicht für absolute oder kategorische Werte nutzen (mehr als vier können iwr nicht gut unterscheiden)
- Welche Farben wir wahrnehmen können (Exkurs Tierwelt?)
- Diese Webseite zur Auswahl von passenden Farben nutzen?
- RGB erklären (und die Addition im Gehirn?

## Farbfehlsichtigkeiten

Farbsehtests


- Farbwahrnehmung braucht Helligkeit und Fläche

## Anwendung in ggplot2: Farbskalen wählen

## Takeaways
- Kommunizieren von der größtmöglichen Anzahl von Ideen in kürzester Zeit.
- Maximieren von Data-ink ratio
- Minimieren von Chart-junk
- Erhöhe Datendichte, Vervielfältige kleine Versionen der Abbildung für verschiedene Gruppen

## Caveat Plots: See data to viz

## Storytelling
Rolfs 7

## Using Text/Annotations

## Nutzen von Eigenschaften der Wahrnehmung
- Bewusste Wahrnehmung ignoriert Informationen und fügt hinzu
- Nähe
- Salienz (Farbe, Größe, Neigung) (Szaﬁr, Haroz, Gleicher & Franconeri
(2016))
- Hier würde das USA Bild passen (evtl. mit einem anderen Beispiel, das den Unterschied deutlich macht, z.B. keine andere Farbe, näher dran durch andere Achse)
- Harold et al., 2016: Lenken von Aufmerksamkeit
- Nothelfer et al., 2017: Redundatne Kodierung führt zu deutlich höherer Genauigkeit der Antworten und kürzeren Reaktionszeiten

## Übung
Schlechte Grafiken verbessern: https://www.data-to-viz.com/caveats.html






