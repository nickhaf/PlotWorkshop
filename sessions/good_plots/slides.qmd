---
title: "Was ist eine gute Grafik?"
format: 
  letterbox-revealjs:
    code-block-height: 650px
bibliography: refs.bib
---

```{r}
#| label: Load pacakges
#| echo: false

library(here)
library(janitor)
library(ggwordcloud)
library(ggrepel)
library(ggtext)
library(tidyverse)
source(here::here("src", "themes.R"))
source(here::here("src", "functions.R"))
```


```{r}
#| echo: false
#| message: false
#| label: Load gapminder data

gapminder <- readRDS(here::here("data", "gapminder_dat.rds"))
```

## 
Excellence in statistical graphics consists of complex ideas communicated with clarity, precision, and efficiency. [@tufte1983visual]

- show the data
- induce the viewer to think about the substance rather than about methodology, graphic design, the technology of graphic production, or something else
- avoid distorting what the data have to say
- present many numbers in a small space
- make large datasets coherent
- encourage the eye to compare different pieces of data
- Reveal the data at several levels of detail, from a broad overview to the fine structure
- serve a reasonably clear purpose: description, exploration, tabulation, or decoration
- be closely integrated with the statistical and verbal descriptions of a data set



## {background-color="white"}

![](./images/mcCandless.png)

::: image-ref
Darstellung von David McCandless in [Knowledge is Beautiful (2014)](https://informationisbeautiful.net/visualizations/what-makes-a-good-data-visualization/).
:::




## What makes a bad plot? 

::: {.columns}
::: {.column width="50%"}

::: {.exercise}

Jede Gruppe bekommt eine Abbildung. 

1. Diskutiert in der Gruppe, was bei der Visualisierung schief läuft. 
1. Session
1. Kurze Diskussion. Stellt den anderen Gruppen eure Ergebnisse vor.

:::

::: 
::: {.column width="50%"}
![](./images/star_plot.jpeg)

:::
:::


::: {.image-ref}
Bild gefunden auf [Reddit](https://www.reddit.com/r/dataisugly/comments/1msd4v2/its_not_wrong_but_i_still_hate_it/). 
:::


# Informationen

::: {.columns}
:::{.column width="50%"}

- Integrität der [Datenquelle]{.highlight}
- Integrität der [Darstellung]{.highlight}

:::
::: {.column width="50%"}
![](./images/news.jpg){.image-right}
:::
:::

::: {.image-ref}
Foto von <a href="https://unsplash.com/de/@humayardim?utm_content=creditCopyText&utm_medium=referral&utm_source=unsplash">Hümâ H. Yardım</a> auf <a href="https://unsplash.com/de/fotos/menschen-die-tagsuber-auf-schneebedecktem-boden-spazieren-gehen-gfZZViTxuqw?utm_content=creditCopyText&utm_medium=referral&utm_source=unsplash">Unsplash</a>

:::


## Integrität der Daten: Garbage in, garbage out 

::: {.columns}
:::{.column width="50%"}

- [Scheinkorrelationen](https://tylervigen.com/spurious-correlations)
- [Wrong data, wrong measurements, wrong interpretations ...](https://www.businessinsider.com/spinach-iron-levels-nutrition-myths-2017-6)
- [Sloppy research](https://journals.sagepub.com/doi/full/10.1177/0306312714535679)
  - P-Hacking
  - Cherry Picking
  
:::
::: {.column width="50%"}

![](./images/garbage_hochkant.jpg){.image-right}

:::
:::


::: image-ref
Foto von <a href="https://unsplash.com/de/@jilburr?utm_content=creditCopyText&utm_medium=referral&utm_source=unsplash">Jilbert Ebrahimi</a> auf <a href="https://unsplash.com/de/fotos/schwarzer-plastikmulleimer-mit-radern-neben-der-wand-b0p818k8Ok8?utm_content=creditCopyText&utm_medium=referral&utm_source=unsplash">Unsplash</a>. 
:::


## Fehlender Kontext

::: {.columns}
:::{.column width="50%}
```{r}
#| echo: false

gapminder_2020 <- gapminder %>%
  filter(time == 2020) %>%
  drop_na(world_6region, world_4region, country, gini, hapiscore_whr) %>% 
  arrange(desc(co2_cons))

ggplot(
  gapminder_2020[1:10, ],
  aes(x = reorder(country, co2_cons), y = co2_cons)
) +
  geom_bar(stat = "identity", width = 1, color = "black", fill = "#208C7A") +
  theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
  labs(
    x = "Land",
    y = "CO2 Consumption in 1000 t",
    title = "China burns the most CO2!"
  ) +
  theme_bg()
```
:::

:::{.column width="50%}
::: {.fragment}
```{r}
#| echo: false

ggplot(
  gapminder_2020[1:10, ],
  aes(x = reorder(country, co2_pcap_cons), y = co2_pcap_cons)
) +
  geom_bar(stat = "identity", width = 1, color = "black", fill = "#208C7A") +
  theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
  labs(
    x = "Land",
    y = "CO2 Consumption per capita in t",
    title = "In China leben auch die meisten Menschen!"
  ) +
  theme_bg()
```
:::
:::
:::



## {background-color="white"}

:::{.columns}

:::{.column width="10%"}

:::
:::{.column width="80%"}
![](./images/impeach.png){width="85%"}

:::
:::{.column width="10%"}

:::

:::

::: image-ref
Siehe [storymaps](https://storymaps.arcgis.com/stories/0e636a652d44484b9457f953994b212b).
:::


## {background-color="white"}

::: {.quote}
"Land doesn't vote ... People Do."
:::


:::{.columns}
::: {.column width="100%"}
![](images/land_doesnt_vote.png)
:::
:::

:::{.image-ref}
Siehe [storymaps](https://storymaps.arcgis.com/stories/0e636a652d44484b9457f953994b212b).
:::

## Daten in Kontext setzen

::: {.panel-tabset}

### Übung

::: {.exercise}

Zeichne [Mittelwerte]{.highlight}, oder [hebe hervor]{.highlight} aus einer Vergleichsmenge, z.B. europäischer Länder. 
Am einfachsten geht das mit einem zweiten Datensatz, der alle europäischen Länder enthält:

```{r}
#| eval: false

gapminder_line <- gapminder %>%
  filter(country %in% c("deu"), time >= 1900, time <= 2024) %>%
  drop_na(gini)

ggplot(data = gapminder_line, aes(x = time, y = gini)) +
  geom_line(aes(group = country))
```


:::{.callout-tip}

**Hinweis**

```{r}
#| code-fold: true


## Bilde einen eignen Datensatz, der alle europöischen Lönder enthält

gapminder_europe <- gapminder %>%
  filter(world_4region == "europe", time >= 1900, time <= 2024) %>%
  drop_na(gini)
```

:::

::: 

### Lösung


::: {.panel-tabset}

### Plot

```{r}
#| echo: false
#| label: gini_europe
#| fig-width: 14

gapminder_line <- gapminder %>%
  filter(country %in% c("deu"), time >= 1900, time <= 2024) %>%
  drop_na(gini)

gapminder_europe <- gapminder %>%
  filter(world_4region == "europe", time >= 1900, time <= 2024) %>%
  drop_na(gini)


p_line <- ggplot(data = gapminder_line, aes(x = time, y = gini)) +
  geom_line(data = gapminder_europe, aes(x = time, y = gini, group = country), color = "lightgrey", alpha = 0.5) +
  geom_smooth(color = "black") +
  geom_line(color = "#F4BA02", linewidth = 2) +
  theme_bg() +
  labs(
    title = "Ungleichheit in Europa On the Rise",
    subtitle = "1900 bis 2024, Gelbe Linie zeigt Deutschland",
    x = "Jahr",
    y = "Gini-Koeffizient"
  )

p_line
```

### Code
```{r}
#| label: gini_europe
#| eval: false
```

:::


:::


## Daten in Kontext setzen

::: {.panel-tabset}

### Plot

```{r}
#| echo: false
#| label: gini_europe2
#| fig-width: 14


gapminder_line <- gapminder %>%
  filter(country %in% c("deu"), time >= 1900, time <= 2024) %>%
  drop_na(gini)

gapminder_europe <- gapminder %>%
  filter(world_4region == "europe", time >= 1900, time <= 2024) %>%
  drop_na(gini)


p_line <- ggplot(data = gapminder_line, aes(x = time, y = gini)) +
  geom_line(data = gapminder_europe, aes(x = time, y = gini, group = country), color = "lightgrey", alpha = 0.5) +
  geom_smooth(color = "black") +
  geom_line(color = "#F4BA02", linewidth = 2) +
  theme_bg() +
  labs(
    title = "Ungleichheit in Europa On the Rise",
    subtitle = "1900 bis 2024, Gelbe Linie zeigt Deutschland",
    x = "Jahr",
    y = "Gini-Koeffizient"
  )

p_line
```

### Code
```{r}
#| label: gini_europe2
#| eval: false
```

:::

## Achsen {background-image="images/axis.jpg"}

::: image-ref
Foto von <a href="https://unsplash.com/de/@fi_66?utm_content=creditCopyText&utm_medium=referral&utm_source=unsplash">Joerg Fielenbach</a> auf <a href="https://unsplash.com/de/fotos/ein-bundel-rohre-die-nebeneinander-liegen-_WRbFUZ0SrE?utm_content=creditCopyText&utm_medium=referral&utm_source=unsplash">Unsplash</a>
      
:::


## Konventionen

::: fragment
::: {.callout-important}
Konventionen beachten! Die y-Achse sollte bspw. in der Regel bei 0 beginnen.
:::
:::

::: {.columns}
::: {.column width="50%"}
![](./images/florida.jpeg){width="75%"}
:::
::: {.column width="50%"}

::: {.small}
776.013 Home protection; use or threatened use of deadly force; presumption of fear of death or great bodily harm.—
(1) A person who is in a dwelling or residence in which the person has a right to be has no duty to retreat and has the right to stand his or her ground and use or threaten to use:  
(a) Nondeadly force against another when and to the extent that the person reasonably believes that such conduct is necessary to defend himself or herself or another against the other’s imminent use of unlawful force; or  
(b) Deadly force if he or she reasonably believes that using or threatening to use such force is necessary to prevent imminent death or great bodily harm to himself or herself or another or to prevent the imminent commission of a forcible felony.

([Florida Satutes](http://www.leg.state.fl.us/statutes/index.cfm?App_mode=Display_Statute&URL=0700-0799/0776/Sections/0776.013.html))

:::
:::
:::


## Manipulation des Bildformats


```{r}
#| label: example-weight
#| fig-width: 14
#| fig-height: 7
#| echo: false

set.seed(42)
my_weight <- data.frame(
  month = factor(c("Januar", "Februar", "März", "April", "Mai", "Juni", "Juli", "August", "September", "Oktober", "November", "Dezember"),
    levels = c("Januar", "Februar", "März", "April", "Mai", "Juni", "Juli", "August", "September", "Oktober", "November", "Dezember"),
    ordered = TRUE
  ),
  weight = rnorm(12, 90, 5) / 1000,
  group = rep(1, 12)
)

ggplot(
  my_weight,
  aes(x = month, y = weight, group = group)
) +
  geom_point() +
  geom_line() +
  labs(
    title = "Mein Gewicht 2024",
    subtitle = "In metrischen Tonnen",
    x = "Monat",
    y = "Gewicht in t"
  ) +
  ylim(0, 1000) +
  theme_bg() +
  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1))
```




## Reales Beispiel für Manipulation des Bildformates {background-color="white"}

::: {.quote}
The designer of the visualization, by selecting a y-axis starting point, has control over the subjective importance of the resulting differences.  
[@correll2020truncating]
:::


::: {.columns}
::: {.column width="100%"}
![](./images/gee-whiz.png){width="70%"}
:::
:::

::: image-ref
Grafik aus @HuffDarrell1979Htlw, heruntergeladen von [Observable blog](https://observablehq.com/blog/never-okay-crop-y-axis-except-when-it-is).
:::


## Soll die Null geplottet werden?

:::{.columns}
:::{.column width="50%"}

```{r}
#| echo: false

ggplot(data = gapminder_line, aes(x = time, y = gini)) +
  geom_smooth(color = "black") +
  geom_line(color = "#F4BA02", linewidth = 2) +
  theme_bg() +
  labs(
    title = "Ungleichheit in Deutschland On the Rise!",
    subtitle = "1900 bis 2024, schwarze Linie zeigt europäischen Durchschnitt",
    x = "Jahr",
    y = "Gini-Koeffizient"
  )
```

:::
:::{.column width="50%"}
```{r}
#| echo: false

ggplot(data = gapminder_line, aes(x = time, y = gini)) +
  geom_smooth(color = "black") +
  geom_line(color = "#F4BA02", linewidth = 2) +
  theme_bg() +
  labs(
    title = "Ungleichheit in Deutschland relativ stabil",
    subtitle = "1900 bis 2024, schwarze Linie zeigt europäischen Durchschnitt",
    x = "Jahr",
    y = "Gini-Koeffizient"
  ) +
  coord_cartesian(ylim = c(0, 100))
```

:::
:::

## Absolute Werte

Die Null sollte in der Regel mitgeplottet werden, da wir uns Mengen anschauen. 

:::{.columns}
:::{.column width="50%"}

```{r}
#| echo: false

ggplot(
  gapminder_2020[1:10, ] %>%
  arrange(desc(co2_pcap_cons)),
  aes(x = reorder(country, co2_pcap_cons), y = co2_pcap_cons)
) +
  geom_bar(stat = "identity", width = 1, color = "black", fill = "#208C7A") +
  theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
  labs(title = "CO2 consumption per capita in the biggest emmiting countries") +
  coord_cartesian(ylim = c(15, 25)) +
  theme_bg()
```

:::
:::{.column width="50%"}

:::{.fragement}
```{r}
#| echo: false

ggplot(
  gapminder_2020[1:10, ],
  aes(x = reorder(country, co2_pcap_cons), y = co2_pcap_cons)
) +
  geom_bar(stat = "identity", width = 1, color = "black", fill = "#208C7A") +
  theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
  labs(title = "CO2 consumption per capita in the biggest emmiting countries") +
  theme_bg()
```
:::
:::
:::

## Veränderung der Werte

Hier ist es eher eine **Ermessensfrage**:

::: {.columns}
:::{.column width="50%"}
\
\

::: {.quote}
If zero is in the neighborhood, invite it in!
([Andrew Gelman](https://statmodeling.stat.columbia.edu/2021/12/17/graphing-advice-if-zero-is-in-the-neighborhood-invite-it-in/))
:::

:::

::: {.column width="50%"}

\
\

::: {.quote}
In general, in a time-series, use a baseline that shows the data not the zero point. [@tufte1983visual]
:::
:::
:::


## Veränderung der Werte
::: {.columns}
:::{.column width="50%"}

```{r}
#| echo: false

gapminder_2020_de <- gapminder %>%
  filter(time >= 2000, time <= 2022, country == "deu") %>%
  arrange(desc(co2_pcap_cons))


ggplot(
  gapminder_2020_de,
  aes(x = time, y = co2_pcap_cons, group = country, colour = country)
) +
  geom_line(linewidth = 1.5) +
  theme_bg() +
  ylim(9, 14) +
  scale_color_manual(values = "#208C7A") +
  labs(title = "CO2 consumption per capita in Germany")
```

:::

:::{.column width="50%"}

```{r}
#| echo: false

ggplot(
  gapminder_2020_de,
  aes(x = time, y = co2_pcap_cons, group = country, colour = country)
) +
  geom_line(linewidth = 1.5) +
  theme_bg() +
  ylim(0, 15) +
  scale_color_manual(values = "#208C7A") +
  labs(title = "CO2 consumption per capita in Germany")
```

:::
:::

## Schneiden von Achsen

::: {.callout-warning}
In der Regel keine gute Idee! Verzerrt die Skala. 
:::

:::{.columns}
:::{.column width="50%}

```{r}
#| echo: false

library(ggbreak)



ggplot(
  gapminder_2020[1:10, ],
  aes(x = reorder(country, co2_cons), y = co2_cons)
) +
  geom_bar(stat = "identity", width = 1, color = "black", fill = "#208C7A") +
  theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
  labs(title = "CO2 consumption per capita in the biggest emmiting countries") +
  scale_y_break(c(1500, 5000)) +
  theme_bg()
```
:::


:::{.column width="50%}
::: fragment
```{r}
#| echo: false
ggplot(
  gapminder_2020[1:10, ] %>%
  arrange(desc(co2_pcap_cons)),
  aes(x = reorder(country, co2_cons), y = co2_cons)
) +
  geom_bar(stat = "identity", width = 1, color = "black", fill = "#208C7A") +
  theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
  labs(title = "CO2 consumption per capita in the biggest emmiting countries") +
  theme_bg()
```
:::
:::
:::


# Story


::: {.columns}

::: {.column width="50%"}

::: {.quote}
Just as writing is made more compelling by a [strong narrative]{.highlight}, this principle also applies to the accompanying figures. ([nature methods](https://www.nature.com/articles/nmeth.2571)) 
:::


:::

::: {.column width="50%"}
![](images/library.jpg){.image-right}

:::
:::


::: {.image-ref}
Foto von <a href="https://unsplash.com/de/@henry_be?utm_content=creditCopyText&utm_medium=referral&utm_source=unsplash">Henry Be</a> auf <a href="https://unsplash.com/de/fotos/bibliotheksregal-in-der-nahe-der-schwarzen-holzleiter-lc7xcWebECc?utm_content=creditCopyText&utm_medium=referral&utm_source=unsplash">Unsplash</a>
:::


## Story-Arc

```{r}
#| echo: false

extrafont::loadfonts()
library(tidyverse)
library(ggridges)
library(viridis)
library(extrafont)
library(cowplot)
library(showtext)

# Loading fonts
font_add_google("DM Serif Display", "abril")
font_add_google("Tajawal", "tawa")
showtext_auto()

# Set theme
theme_set(theme_light())
# Loading data
babynames <- readr::read_csv("https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2022/2022-03-22/babynames.csv")

# 50 most popular female names over all time
top_female <- babynames |>
  filter(sex == "F") |>
  group_by(name) |>
  summarise(total = sum(n)) |>
  slice_max(total, n = 50) |>
  mutate(
    rank = 1:50,
    name = forcats::fct_reorder(name, -total)
  ) |>
  pull(name)

# 50 most popular male names over all time
top_male <- babynames |>
  filter(sex == "M") |>
  group_by(name) |>
  summarise(total = sum(n)) |>
  slice_max(total, n = 50) |>
  mutate(
    rank = 1:50,
    name = forcats::fct_reorder(name, -total)
  ) |>
  pull(name)

# filter female names data
female_names <- babynames |>
  filter(
    sex == "F",
    name %in% top_female
  ) |>
  mutate(name = factor(name, levels = levels(top_female))) |>
  group_by(year, name) |>
  summarise(n = sum(n))

# filter top males
male_names <- babynames |>
  filter(
    sex == "M",
    name %in% top_male
  ) |>
  mutate(name = factor(name, levels = levels(top_male))) |>
  group_by(year, name) |>
  summarise(n = sum(n))


plot1 <- ggplot(female_names, aes(year,
  y = fct_reorder(name, n), height = n / 50000,
  group = name, scale = 2
)) +
  geom_ridgeline(
    alpha = 0.5, scale = 4.5, linewidth = 0,
    fill = "#05595B", color = "white"
  ) +
  xlim(1900, NA) +
  labs(title = "Female", y = "", x = "") +
  theme(
    plot.title = element_text(hjust = 0, family = "Bahnschrift", size = 20),
    axis.ticks.y = element_blank(),
    axis.text = element_text(family = "Bahnschrift", size = 15),
    panel.grid.major.x = element_blank(),
    panel.grid.minor.x = element_blank(),
    panel.grid.major.y = element_line(size = 0.5),
    panel.border = element_blank()
  ) +
  geom_segment(aes(x = 1967, xend = 1967, y = 56.7, yend = 52), color = "#404040") +
  geom_segment(aes(x = 1967, xend = 1964, y = 56.7, yend = 56.7), color = "#404040") +
  annotate(
    geom = "text", x = 1970, y = 57, label = "73,982 babies called\n'Mary' in 1921", hjust = "left",
    size = 7, color = "#404040", family = "Bahnschrift"
  )


plot2 <- ggplot(male_names, aes(year,
  y = fct_reorder(name, n), height = n / 50000,
  group = name, scale = 2
)) +
  geom_ridgeline(
    alpha = 0.5, scale = 4.5, linewidth = 0,
    fill = "#603601", color = "white"
  ) +
  xlim(1900, NA) +
  labs(title = "Male", y = "", x = "") +
  theme(
    plot.title = element_text(hjust = 0, family = "Bahnschrift", size = 20),
    axis.ticks.y = element_blank(),
    axis.text = element_text(family = "Bahnschrift", size = 15),
    panel.grid.major.x = element_blank(),
    panel.grid.minor.x = element_blank(),
    panel.grid.major.y = element_line(size = 0.5),
    panel.border = element_blank(),
    panel.background = element_rect(fill = "white"),
    plot.background = element_rect(fill = "white")
  ) +
  geom_segment(aes(x = 1975, xend = 1975, y = 58, yend = 53.1), color = "#404040") +
  geom_segment(aes(x = 1975, xend = 1972, y = 58, yend = 58), color = "#404040") +
  annotate(
    geom = "text", x = 1977, y = 57.6, label = "94,756 babies called\n'James' in 1947", hjust = "left",
    size = 7, color = "#404040", family = "Bahnschrift"
  )


title_theme <- ggdraw() +
  draw_label("50 most common given names in the US since 1900",
    fontfamily = "Gadugi",
    fontface = "bold",
    size = 45,
    hjust = 0.4
  )

# caption
caption <- ggdraw() +
  draw_label("Source: {babynames} from Hadley Wickham | Graphic: Laura Navarro Soler",
    fontfamily = "Bahnschrift",
    size = 25,
    hjust = 0.5,
    color = "#6B6B6B"
  )

gridofplots <- plot_grid(plot1, plot2, nrow = 1)
plot_grid(title_theme,
  gridofplots,
  caption,
  ncol = 1, rel_heights = c(0.2, 1.5, 0.1)
)
```

::: image-ref
Abbildung von [Laura Navarro Soler](https://r-graph-gallery.com/web-double-ridgeline-plot.html).
:::

## Story-Arc

![](./images/food_deserts.png){.lightbox}

::: {.image-ref}
Abbildung von [Corey Jones](https://public.tableau.com/app/profile/corey.jones/viz/FindingOasesInFoodDeserts/Dashboard1).
:::


## Episodische Grafik, lass es sich entfalten. 

![](./images/water_world.png)

::: {image-ref}
Bild von [information is beautiful](https://informationisbeautiful.net/visualizations/water-world-distribution-of-the-all-the-water-in-all-the-world/).
:::


- “If your study were reported in the newspaper, what would the headline be?”


## Bewerten der Informationen 

![](./images/hollywood.png)

## Zusätzliche Informationen einbauen

::: {.panel-tabset}

### Plot

```{r}
#| label: line_labels
#| fig-width: 14
#| fig-height: 7
#| echo: false

gapminder_line <- gapminder %>%
  filter(country %in% c("deu"), time >= 1900, time <= 2024) %>%
  drop_na(gini)

steuer <- gapminder_line %>%
  filter(time %in% c(1914, 1920, 1939, 1945, 1974, 1990, 1991, 1996, 2020), country == "deu") %>%
  arrange(time) %>%
  mutate(label = c("Beginn 1. WK", "Reichseinkommensteuer", "Beginn 2. WK", "Starke Anhebung durch Alliiert", "Einkommenssteuerreformgesetz", "Wiedervereinigung", "Linear-Progressiver Tarif", "Anhebung Freibetrage", "Corona"))

p_line <- ggplot(data = gapminder_line, aes(x = time, y = gini)) +
  theme_bg_dark() +
  geom_line(data = gapminder_europe, aes(x = time, y = gini, group = country), color = "#F8F8F8", alpha = 0.2) +
  geom_line(color = "#F4BA02", linewidth = 2) +
  geom_point(data = steuer) +
  geom_text_repel(
    data = steuer, aes(label = label), nudge_x = c(20, 25, 10, -5, 0, 0, -10), nudge_y = c(2, 2, 2, -2, 1, -2, 1),
    color = "#F4BA02"
  ) +
  labs(
    title = "Ungleichheit in Deutschland On the Rise?",
    subtitle = "Gini-Koeffizient von 1850 bis 2024",
    x = "Jahr",
    y = "Gini-Koeffizient"
  ) +
  geom_richtext(
    data = data.frame(
      x = 1900, y = 20,
      label = "<b>Gini-Koeffizient</b>: <br> Maß für Ungleichheit. <br> In diesem Fall Einkommen.<br>0 = vollkommen gleich <br> 100 = maximal ungleich."
    ),
    aes(x, y, label = label),
    hjust = 0, vjust = 0,
    fill = "#F4BA02", label.color = "#01364C",
    label.r = grid::unit(3, "pt"),
    size = 5
  )

p_line

## Add a plot on vermogen!! Evtl. einfach den Gini Koeffizienten fur ein Paar Jahre, die ich habe

## https://www.econtribute.de/RePEc/ajk/ajkpbs/ECONtribute_PB_001_2020.pdf
```

### Code
```{r}
#| label: line_labels
#| eval: false
```

:::

## Vergleichen


::: {.panel-tabset}

### Plot
```{r}
#| label: merged_lineplot
#| echo: false


#
# World Inequality Lab – Working Paper N° 2022/09
# Wealth and its Distribution in Germany,
# 1895-2018

df <- data.frame(
  year = c(
    1895, 1900, 1905, 1910, 1915, 1920, 1925, 1930, 1935, 1940,
    1945, 1950, 1955, 1960, 1965, 1970, 1975, 1980, 1985, 1990,
    1995, 2000, 2005, 2010, 2015, 2018
  ),
  top1_share_percent = c(
    46, 47, 47.5, 48, 47.5, 45, 36, 41, 38, 33,
    28, 23, 22, 23, 21, 24, 28, 27, 26, 25.5,
    26, 27, 26.5, 28.5, 27, 28
  )
)

ggplot(df, aes(year, top1_share_percent)) +
  geom_line() +
  geom_point() +
  ylim(c(0, 50))



dat_eink <- data.frame(
  country = rep(c("Schweiz", "Deutschland", "Österreich"), 4),
  Steuer = c(rep("Erbschaft", 3), rep("Vermögen", 3), rep("Konsum", 3), rep("Unternehmen", 3)),
  anteil = c(1, 0, 1, 7, 0, 0, 26, 41, 43, 15, 12, 10)
)

p_bar <- ggplot(dat_eink, aes(x = reorder(Steuer, anteil), y = anteil, fill = Steuer)) +
  geom_bar(stat = "identity", position = "dodge") +
  facet_wrap(vars(country)) +
  theme_bg() +
  labs(
    title = "Steueraufkommen in % des BIP",
    subtitle = "Haushaltsjahr 2022",
    x = "Steuerart",
    y = "Anteil am BIP in %"
  ) +
  geom_text(aes(label = anteil),
    position = position_dodge(width = 0.9),
    vjust = -0.25
  ) +
  theme_bg_dark()


# https://www.wsi.de/de/blog-17857-vermoegensteuer-geht-die-schweiz-widerlegt-den-mythos-vom-unmoeglichen-68853.htm


gapminder_usa <- gapminder %>%
  filter(country %in% c("usa"), time >= 1850, time <= 2024) %>%
  drop_na(gini)

p_line_usa <- ggplot(data = gapminder_usa, aes(x = time, y = gini, color = country)) +
  geom_line() +
  theme_bg() +
  labs(
    title = "Einkommens- und Erbschaftssteuer in den USA",
    subtitle = "Gini-Koeffizient von 1850 bis 2024",
    x = "Jahr",
    y = "Gini-Koeffizient"
  ) +
  geom_richtext(
    data = data.frame(
      x = 1850, y = 30,
      label = "Zwischen 1930 und 1980 wurden in den Vereinigten Staaten die höchsten Einkommen durchschnittlich mit 81 Prozent besteuert und die größten vererbten Vermögen mit 74 Prozent."
    ),
    aes(x, y, label = label),
    inherit.aes = FALSE,
    hjust = 0, vjust = 0,
    fill = "white", label.color = "black",
    label.r = grid::unit(3, "pt"),
    size = 3.5
  ) +
  theme_bg_dark()





## Eine Vermogenssteuer hat das potenzial, Ungleichheit zu reduzieren, und die Abgabenlast von Konsumsteuern zu reduzieren.
## Die USA hatten in den 80 Jahren eine 80% Vermogenssteuer.


library(patchwork)


p_line +
  annotation_custom(ggplotGrob(p_bar),
    xmin = 1980, ymin = 43,
    xmax = 2020
  ) +
  p_line_usa +
  plot_layout(widths = c(2, 1))
```

```{r}
#| label: merged_lineplot
#| eval: false
```

::: 

## 

::: {.exercise}

1. Was wäre die Überschrift für eure Grafik, wenn sie in der Zeitung stehen würde?
1. Welche Infos sind noch notwendig, um die Grafik zu verstehen? Wo könnte man sie einbauen?
1. Soll die Abbildung aus mehreren Plots bestehen? In welcher Reihenfolge?

:::


# Goal
- Usefulness
- usable
- fitting
- efficient


Tufte Zitat


## Pulikum


## Purpose
- Exploratory vs. Explanatory
- Kann oft über reines Zeigen der Daten hinausgehen. 



# Effizienz: Salienz von Informationen

Man soll raufschauen könnenn, und verschiedene Informationen möglichst schnell aufnehmen, ohne lange zu überlgen. Deshalb hier!


https://www.nature.com/articles/nmeth1010-773
Unterscheiden von Gruppen: 
- Gruppierung
- Größe
- Farbe
- Form

- Bewusste Wahrnehmung ignoriert Informationen und fügt hinzu
- Nähe
- Salienz (Farbe, Größe, Neigung) (Szaﬁr, Haroz, Gleicher & Franconeri
(2016))
- Hier würde das USA Bild passen (evtl. mit einem anderen Beispiel, das den Unterschied deutlich macht, z.B. keine andere Farbe, näher dran durch andere Achse)
- Harold et al., 2016: Lenken von Aufmerksamkeit
- Nothelfer et al., 2017: Redundatne Kodierung führt zu deutlich höherer Genauigkeit der Antworten und kürzeren Reaktionszeiten


## Gruppieren

## Formen

## Darstellung von Größen

Die Größe von Elemenen kann auch genutzt werden, um Daten zu kodieren.

```{r}
#| echo: false
#| fig-width: 18
#| fig-height: 10

library(ggwordcloud)
library(showtext)

tags <- read.csv(here::here("data", "goodbooks-10k", "tags.csv"))
book_tags <- read.csv(here::here("data", "goodbooks-10k", "book_tags.csv"))
books <- read.csv(here::here("data", "goodbooks-10k", "books.csv")) 


classics <- book_tags %>% 
left_join(books) %>%
left_join(tags) %>% 
filter(tag_name == "classics") %>% 
filter(ratings_count > 20000, !duplicated(authors)) %>%
  select(original_title, average_rating, tag_name, ratings_count) %>%
  distinct() %>% 
  arrange(ratings_count) %>%
  slice_tail(n = 50)


font_add_google("Special Elite", family = "my textfont")
font_add_google("Playfair Display")

showtext_auto()


set.seed(45)
ggplot(data = classics, 
       mapping = aes(label = original_title, size = average_rating)) +
  geom_text_wordcloud(family = "my textfont") +
scale_size(range = c(5, 20)) +
labs(title = "What to read next", 
subtitle = "According to the 50 most read classics on goodreads.", 
caption = "The larger the title, the higher the average rating.") +
theme_bg() +
theme(title = element_text(family = "Playfair Display", size = 50), 
      subtitle = element_text(family = "Playfair Display", size = 40),
caption = element_text(family = "Playfair Display", size = 30)
)
```


## Einschätzen von Größen

:::{.columns}
:::{.column widht="50%}

```{r}
#| echo: false

library(ggplot2)

# Define the data
df <- data.frame(
  row = rep(1:3, each = 2),
  column = rep(c("A", "B"), times = 3),
  size = c(1, 10, 1, 5, 1, 2)
)

# Plot
ggplot(df, aes(x = column, y = factor(row), size = size)) +
  geom_point(shape = 16, color = "#01364C") +
  scale_size_area(max_size = 30) + # keeps area proportional to value
  scale_y_discrete(name = NULL, limits = rev) +
  xlab(NULL) +
  theme_bg() +
  theme(
    axis.text.y = element_text(hjust = 1),
    panel.grid = element_blank(),
    legend.position = "none"
  )
```
:::

:::{.column widht="50%}

::: {.fragment}

```{r}
#| echo: false
library(ggplot2)

# Define the data
df <- data.frame(
  row = rep(1:3, each = 2),
  column = rep(c("A", "B"), times = 3),
  size = c(1, 10, 1, 5, 1, 2)
)

# Plot with squares
ggplot(df, aes(x = column, y = factor(row), size = size)) +
  geom_point(shape = 15, color = "#01364C") + # shape 15 = square
  scale_size_area(max_size = 30) + # still based on area
  scale_y_discrete(name = NULL, limits = rev) +
  xlab(NULL) +
  theme_bg() +
  theme(
    axis.text.y = element_text(hjust = 1),
    panel.grid = element_blank(),
    legend.position = "none"
  )
```

:::
:::
:::

::: {.fragment}
:::{.callout-caution}
Die Größe von Kreisen einzuschätzen ist schwer!
:::
:::


## Das gleiche gilt für Winkel!

::: {.slide data-background-color="white"}


::: {.columns}
 
Versuche, die Größen zu sortieren: 

::: {.column width="50%"}
```{r }
#| echo: false

continent_co2 <- gapminder_2020 %>%
  group_by(world_6region) %>%
  summarise(mean_co2_pcap_cons = mean(co2_pcap_cons, na.rm = TRUE)) %>%
  drop_na(mean_co2_pcap_cons)

continent_co2$world_6region <- factor(
  continent_co2$world_6region,
  levels = c(
    "south_asia",
    "sub_saharan_africa",
    "europe_central_asia",
    "middle_east_north_africa",
    "america",
    "east_asia_pacific"
  ),
  labels = c(
    "South Asia",
    "Sub-Saharan Africa",
    "Europe & Central Asia",
    "Middle East & North Africa",
    "Americas",
    "East Asia & Pacific"
  )
)

continent_co2_pct <- continent_co2 %>%
  mutate(percentage = mean_co2_pcap_cons / sum(mean_co2_pcap_cons)) %>%
  arrange(desc(world_6region)) %>%
  mutate(
    ymax = cumsum(percentage),
    ymin = c(0, head(ymax, -1))
  )


ggplot(
  continent_co2_pct,
  aes(x = "", y = percentage * 100, fill = world_6region)
) +
  geom_bar(stat = "identity", width = 1) +
  coord_polar("y") +
  scale_fill_manual(values = theme_colors) +
  labs(title = "Share of global per capita CO2 consumption") +
  theme_minimal() +
  theme(
    axis.title = element_blank(),
    legend.position = "bottom",
    legend.key.size = unit(0.4, "cm"),
    legend.text = element_text(size = 7),
    legend.title = element_blank()
  )
```
:::

::: {.column width="50%"}
:::{.fragment}

```{r}
#| echo: false


continent_co2_pct <- continent_co2 %>%
  mutate(percentage = mean_co2_pcap_cons / sum(mean_co2_pcap_cons) * 100)

ggplot(
  continent_co2_pct,
  aes(x = world_6region, y = percentage, fill = world_6region)
) +
  geom_bar(stat = "identity", width = 1) +
  scale_fill_manual(values = theme_colors) +
  theme_minimal() +
  labs(title = "Share of global per capita CO2 consumption 2020") +
  theme(
    axis.title.x = element_blank(),
    axis.text.x = element_blank(),
    legend.position = "bottom",
    legend.key.size = unit(0.4, "cm"),
    legend.text = element_text(size = 7),
    legend.title = element_blank()
  )
```
:::
:::
:::
:::



## Farben
:::: {.columns} 
::: {.column width="50%"}

Farbe ist eine der wichtigsten Methoden, um Informationen zu [labeln], hervorzuheben, [Werte] zu kommunizieren, [Realität simulieren], und um zu designen und zu [dekorieren]. 
:::

::: {.column width="50%"}
![](./images/colors.jpg){.image-right}
:::
:::

::: image-ref
Foto von <a href="https://unsplash.com/de/@efekurnaz?utm_content=creditCopyText&utm_medium=referral&utm_source=unsplash">Efe Kurnaz</a> auf <a href="https://unsplash.com/de/fotos/multicolored-hallway-RnCPiXixooY?utm_content=creditCopyText&utm_medium=referral&utm_source=unsplash">Unsplash</a>
      
:::

## Kategoriale vs. quantitative Daten

```{r}
#| label: color-plot
#| echo: false


color_plot_cat <- ggplot(
  gapminder_2020,
  aes(x = gini, y = hapiscore_whr, color = world_6region)
) +
  geom_point(size = 3) +
  theme_bg() 


color_plot_num <- ggplot(
  gapminder_2020,
  aes(x = world_6region, y = hapiscore_whr, color = gini)
) +
  geom_point(size = 3) +
  theme_bg() 


color_plot_bar <- ggplot(
  gapminder_2020 %>% group_by(world_6region) %>%
    summarise(hapiscore_whr = mean(hapiscore_whr, na.rm = TRUE)) %>%
    drop_na(),
  aes(x = world_6region, y = hapiscore_whr, fill = world_6region)) +
  geom_bar(stat="identity", width = 1) +
  theme_bg()+ theme(axis.title.x = element_blank(),
        axis.text.x  = element_blank(),
        axis.ticks.x = element_blank(),
        axis.line.x  = element_blank())

```


::: {.columns}
::: {.column width="50%"}

### Kategoriale Daten
Verschiedene Farben, die sich gut unterscheiden lassen.

```{r}
#| echo: false
color_plot_cat

```

:::
::: {.column width="50%"}

### Quantitative Daten
Farbverläufe, die eine Reihenfolge haben.

```{r}
#| echo: false
color_plot_num

```
:::
:::

::: {.callout-tip}
`ggplot2` setzt die entsprechende Skala schon automatisch!
:::



## Skalen mit Nullpunkt
- Was zu beachten ist: unten Blau oben Rot ...
https://ggplot2-book.org/scales-colour.html
- Vor allem für diskrete Gruppen geeignet
- Farbverläufe schwieriger (aber es gibt color scales dafür)
- Bestimmte Farben (Grün = gut, Rot = Gefahr)

- Intervallskaliert/Verhältnisskaliert: Es gibt Nullpunkt: Divergierende Skalen
  - Kein Nullpunkt: Gleichmäßige Abstände zwischen Farbwerten
- Ordinal: Richtung und gute Unterscheidbarkeit im Farbraum
- Nominalskaliert: Spriale/Diagnoale im Farbraum


- Diskret
- Continuous
- Binned
Vorgefertigte Paletten:

Sequenziell
\
Qualitativ
\
Diverging


## Farbwahrnehmung beim Menschen {style="text-align: right;"}

::: {.columns}
::: {.column width="50%"}
![](./images/electro_spec.svg){.image-left}
:::

::: {.column widht="50%"}

Primärfarben des Lichts: [R]{.highlight}ot, [G]{.highlight}rün, [B]{.highlight}lau

\

![](./images/cones_human.svg)


:::
:::

:::{.image-ref}
By <a href="//commons.wikimedia.org/wiki/File:Electromagnetic-Spectrum.png" title="File:Electromagnetic-Spectrum.png">Original: </a> <a href="//commons.wikimedia.org/wiki/User:Penubag" title="User:Penubag">Penubag</a> Vector: <a href="//commons.wikimedia.org/wiki/User:Victor_Blacus" title="User:Victor Blacus">Victor Blacus</a> - Own work based on: <a href="//commons.wikimedia.org/wiki/File:Electromagnetic-Spectrum.png" title="File:Electromagnetic-Spectrum.png">Electromagnetic-Spectrum.png</a>, <a href="https://creativecommons.org/licenses/by-sa/3.0" title="Creative Commons Attribution-Share Alike 3.0">CC BY-SA 3.0</a>, <a href="https://commons.wikimedia.org/w/index.php?curid=22428451">Link</a>  
By <a href="//commons.wikimedia.org/wiki/User:BenRG" title="User:BenRG">BenRG</a> - <span class="int-own-work" lang="en">Own work</span>, Public Domain, <a href="https://commons.wikimedia.org/w/index.php?curid=7873848">Link</a>
:::




## Andere Tiere können auch mal mehr oder weniger haben:

::: {.columns}

::: {.column width="50%"}
![](./images/color_animals.png)
:::

::: {.column width="50%"}
![](./images/chicken.jpg){.image-right}
:::
:::

:::{.image-ref}
Bild aus [Farbsehen der Tiere](https://media.springernature.com/original/springer-static/image/art%3A10.1007%2Fs00347-017-0543-6/MediaObjects/347_2017_543_Fig1_HTML.gif?as=jpg)  
Foto von <a href="https://unsplash.com/de/@relentlessjpg?utm_content=creditCopyText&utm_medium=referral&utm_source=unsplash">Ben Moreland</a> auf <a href="https://unsplash.com/de/fotos/selective-focus-photography-of-brown-hen-auijD19Byq8?utm_content=creditCopyText&utm_medium=referral&utm_source=unsplash">Unsplash</a>
      
:::

## Viele Tiere sehen nur grau

::: {.columns}

::: {.column width="50%"}

Warum überhaupt Farbwahrnehmung?

::: {.fragment}

- [Konsistenz]{.highlight}: Farbtöne sind unabhängig vom Licht wahrnehmbar. 
- Aber: [More is not always better!]{.highlight} Zu viel kann auch vom Wesentlichen ablenken. 


<!-- : Affen vom Amerikanischen Kontinent sind teilweise die und teilweise tetra: di kann besser INsekten ausmachen, tri Früchte gegen grünen background.  -->


Farbwahrnehmung ist also subjektiv, und bringt nur einen Vorteil, wenn eine Bedeutung daraus abgeleitet werden kann. 

:::

:::

::: {.column width="50%"}
![](./images/whale.jpg){.image-right}
:::
:::


::: {.image-ref}
Foto von <a href="https://unsplash.com/de/@mero_dnt?utm_content=creditCopyText&utm_medium=referral&utm_source=unsplash">Chinh Le Duc</a> auf <a href="https://unsplash.com/de/fotos/ein-buckelwal-schwimmt-unter-der-wasseroberflache-P19iVmm7XUA?utm_content=creditCopyText&utm_medium=referral&utm_source=unsplash">Unsplash</a>
:::


## More is not always better

::: {.columns}
::: {.column width="50%"}
```{r}
#| echo: false

color_plot_cat
```

:::
::: {.column width="50%"}

```{r}
ggplot(
  gapminder_2020,
  aes(x = gini, y = hapiscore_whr, color = world_4region)
) +
  geom_point(size = 3) +
  theme_bg() 
```

:::
:::


Mehr als [sechs]{.highlight} Farben sollten es auf keinen Fall werden!

::: {.callout-tip}
Alternative: Facetting. 
:::

## Farben

![](./images/color_perception.png)

Ganglienzellen übertragen keine Informationen über absolute Helligkeit,
sondern über [relative Helligkeit]{.highlight}.


::: {.callout-info}
Visualisierung kann nicht gut darin sein, absolute Werte zu
kommunizieren (Tabellen können das besser). 
Aber: [Unterschiede]{.highlight} und [Veränderungen]{.highlight}. 
:::


::: .image-ref
Bild von [Nature Methods](https://www.nature.com/articles/nmeth0810-573/figures/1). 
:::


##
::: {.columns}
::: {.column width="50%"}

Hier sind die Farben klar unterscheidbar, und der Gini-Index lässt sich gut ablesen.

```{r}
#| echo: false
color_plot_cat

```

:::
::: {.column width="50%"}

Der Plot ist etwas sub-optimaler. Die tatsächlichen Werte des Gini-Index werden nicht gut kommuniziert. 

```{r}
#| echo: false
color_plot_num

```
:::
:::


## Farbe ist relativ

```{r}
#| label: color_bias_reds
#| echo: false
#| fig-width: 14
#| fig-height: 7

theme_colors_red <- c(
  "#D80000", 
  "#D80020", 
  "#D80040", 
  "#D80060", 
  "#D80080", 
  "#D80099" 
)


color_plot_bar +
  scale_fill_manual(values = theme_colors_red)

```




## Eigenschaften von Farben

::: {.columns}

### Farbton, Sättigung, Helligkeit
Die drei Eigenschaften beschreiben das Aussehen von Farben. 

::: {.column width="50%"}

![](./images/color_properties.png)

:::


::: {.column width="50%"}

### Farbräume
- RGB: **Zusammen**mischen von Licht der unterschiedlichen Farben. Alle drei zusammen ergeben weiß. 
- CMYK: **Ausblenden** aus dem weißen Farbspektrum durch Filter. Grundfarben: Gelb, Magenta (Purpur), Cyan (Blaugrün) (+K - Key (also Schwarz))

:::
:::



## Salienz

Sticht eine Farbe hervor, ist sie besonders salient - das kann gewollt oder ungewollt sein. 

::: {.columns}
:::{.column widht="50%}

```{r}
#| label: color_bias__scatter_bar
#| echo: false

accent_scale <- c(
"america" = "#7FC97F",
"east_asia_pacific" = "#699896FF", 
"europe_central_asia" = "red", 
"middle_east_north_africa" = "#9FAFC0", 
"south_asia" = "#B49B97",
"sub_saharan_africa" = "#E9E4A6FF" 
)

color_plot_bar +
   scale_fill_manual(values = accent_scale)
```

:::


:::{.column widht="50%}
```{r}
#| label: color_balanced__scatter_bar
#| echo: false

theme_colors_3 <- c(
  "#9FAFC0", # entsättigtes Dunkelblau
  "#B49B97", # ausgebleichtes Braun
  "#F2E2A0", # ausgebleichtes Gelb (statt Rot)
  "#A7C9C3", # stark aufgehelltes Türkis
  "#D8B88C", # heller Orange-Braun-Ton
  "#A6B7CA", # blasser Stahlblau-Ton
  "#BFD4C2", # sehr blasses Olivgrün
  "#D6C1D5", # blasses Flieder/Pastell-Lila
  "#D8D9DB" # sehr heller, neutraler Grauton
)

color_plot_bar +
   scale_fill_manual(values = theme_colors_3)
```


:::

:::



## Größe

:::{.columns}
:::{.column width="33%"}

```{r}
#| echo: false
#| fig-width: 6
#| fig-height: 8

ggplot(
  gapminder_2020,
  aes(x = gini, y = hapiscore_whr, color = world_6region)
) +
  geom_point(size = 1) +
  theme_bg() 


```
:::

:::{.column width="33%"}
```{r}
#| echo: false
#| fig-width: 6
#| fig-height: 8

ggplot(
  gapminder_2020,
  aes(x = gini, y = hapiscore_whr, color = world_6region)
) +
  geom_point(size = 2) +
  theme_bg() 

```
:::

:::{.column width="33%"}
```{r}
#| echo: false
#| fig-width: 6
#| fig-height: 8

ggplot(
  gapminder_2020,
  aes(x = gini, y = hapiscore_whr, color = world_6region)
) +
  geom_point(size = 3) +
  theme_bg() 

```
:::
:::


## Farbfehlsichtigkeit

![](./images/cones_eye.jpg)

protanopic right side

::: {.image-ref}
By Mark Fairchild, <a href="https://creativecommons.org/licenses/by-sa/3.0" title="Creative Commons Attribution-Share Alike 3.0">CC BY-SA 3.0</a>, <a href="https://commons.wikimedia.org/w/index.php?curid=32075732">Link</a>
:::

- Protanopie: Zapfentyp L (rot) fehlt: rot vs grün Schwäche
- Deuteranopie: Zapfentyp M (grün) fehlt: rot vs grün Schwäche
- Tritanopie: Zapfentyp S (blau) fehlt: blau vs grün, gelb vs violett Schwäche


- Take the above scale and show that it is not great for color blindness
- https://www.color-blindness.com/coblis-color-blindness-simulator/


## Colorblind-Check

::: {.columns}
::: {.column width="50%"}
Auf [Colblindor](https://www.color-blindness.com/coblis-color-blindness-simulator/).

![](./images/colorblind_check.png)

:::

::: {.column width="50%"}
Mit [colorblindcheck](https://cran.r-project.org/web/packages/colorblindcheck/index.html).

```{r}
library(colorblindcheck)

palette_check(scales::hue_pal()(6), plot = TRUE)
```

:::
:::



## Anwendung in ggplot2

## Farben whlen
- Name
- rgb()
- Nummer
- Hex code

## Farben manuell setzen

::: {.columns}
::: {.column width="50%"}

::: panel-tabset

### Code

```{r}
#| label: manual_color_scale
#| code-line-numbers: "11"
#| fig-show: hide

ggplot(
  continent_co2_pct,
  aes(
    x = world_6region,
    y = percentage,
    fill = world_6region
  )
) +
  geom_bar(stat = "identity", width = 1) +
  theme_minimal() +
  labs(title = "Share of global per capita CO2 consumption") +
  scale_fill_manual(values = c("red", "green", "blue", "yellow", "violet", "brown"))
```

### Plot

```{r}
#| label: manual_color_scale
#| echo: false
```

:::
:::

:::{.column widht="50%"}


::: panel-tabset

### Code

```{r}
#| label: manual_color_scale_named
#| code-line-numbers: "1,2,3,4,5,6,7,8,20"
#| reults: hide
#| fig-show: hide

my_color_scale <- c(
  "East Asia & Pacific" = "red",
  "South Asia" = "green",
  "Sub-Saharan Africa" = "blue",
  "Europe & Central Asia" = "yellow",
  "Middle East & North Africa" = "violet",
  "Americas" = "brown"
)

ggplot(
  continent_co2_pct,
  aes(
    x = world_6region,
    y = percentage,
    color = world_6region
  )
) +
  geom_bar(stat = "identity", width = 1) +
  theme_minimal() +
  labs(title = "Share of global per capita CO2 consumption 2020") +
  scale_color_manual(values = my_color_scale)
```

### Plot

```{r}
#| label: manual_color_scale_named
#| echo: false
```

:::

::: {.callout-tip}
Wenn du in einem Projekt die gleichen Gruppen in verschiedenen Plots zeigst, setze die Farbskala einmal mit den Gruppennamen, damit die Gruppen in allen Plots die selben Farben bekommen.
:::

:::
:::




## Graustufen 



```{r}
#| code-line-numbers: "12"
#| output-location: column


ggplot(
  continent_co2_pct,
  aes(
    x = world_6region,
    y = percentage,
    fill = world_6region
  )
) +
  geom_bar(stat = "identity", width = 1) +
  theme_minimal() +
  labs(title = "Share of global per capita CO2 consumption 2020") +
  scale_fill_grey()
```




## Externe Farb-Paletten

::: {.columns}
::: {.column width="50%"}
[**R Color Brewer**](https://r-graph-gallery.com/38-rcolorbrewers-palettes.html)

```{r}
library(RColorBrewer)
display.brewer.all(colorblindFriendly = FALSE)
```

:::
::: {.column width="50%"}


::: panel-tabset

### Code

```{r}
#| label: color_brewer
#| reults: hide
#| fig-show: hide
#| code-line-numbers: "1,12"

library(RColorBrewer)

ggplot(
  continent_co2_pct,
  aes(
    x = world_6region,
    y = percentage,
    fill = world_6region
  )
) +
  geom_bar(stat = "identity", width = 1) +
  theme_minimal() +
  labs(title = "Share of global per capita CO2 consumption") +
  scale_fill_brewer(palette = "PuOr")
```


### Plot

```{r}
#| label: color_brewer
#| echo: false
```

:::
:::
:::

## Externe Farb-Paletten
::: {.columns}
::: {.column width="50%"}
[**paletteer**](https://r-graph-gallery.com/package/paletteer.html)

Sammlung von Paletten aus diversen Paketen

- [Palette-Finder](https://r-graph-gallery.com/color-palette-finder)
- [Gallerie](https://pmassicotte.github.io/paletteer_gallery/#sequential)

:::

::: {.column width="50%"}

::: panel-tabset

### Code

```{r}
#| label: paletteer
#| reults: hide
#| fig-show: hide
#| code-line-numbers: "1,14"

library(paletteer)

ggplot(
  continent_co2_pct,
  aes(
    x = world_6region,
    y = percentage,
    fill = world_6region
  )
) +
  geom_bar(stat = "identity", width = 1) +
  theme_minimal() +
  labs(title = "Share of global per capita CO2 consumption") +
  scale_fill_paletteer_d("LaCroixColoR::Orange")
```


### Plot

```{r}
#| label: paletteer
#| echo: false
```

:::
:::

:::



## Übung

::: {.exercise}
1. Baue eine eigene Farbpalette für deinen Plot und teste sie auf Farbfehlsichtigkeiten.
:::


# Visual Form


::: {.columns}
::: {.column width="50%}
::: {.quote}
Design is a requirement, not a cosmetic addition. ([nature methods](https://www.nature.com/articles/nmeth.1783))
:::

- Nützlichkeit
- Effizienz
- Ästhetik

:::
::: {.column width="50%}
![](./images/eye.jpg){.image-right}
:::
:::

::: {.image-ref}
Foto von <a href="https://unsplash.com/de/@samscrim?utm_content=creditCopyText&utm_medium=referral&utm_source=unsplash">Samuel Scrimshaw</a> auf <a href="https://unsplash.com/de/fotos/macro-photography-of-gray-alligator-eye-iq8x4Ik8mi8?utm_content=creditCopyText&utm_medium=referral&utm_source=unsplash">Unsplash</a>
      
:::


## Nützlichkeit

:::{.columns}

::: {.column width="50%"}
![](./images/remote.jpg)

:::

:::{.column width="50%"}
![](./images/remote_2.jpg)

::: image-ref
Foto von <a href="https://unsplash.com/de/@kellysikkema?utm_content=creditCopyText&utm_medium=referral&utm_source=unsplash">Kelly Sikkema</a> auf <a href="https://unsplash.com/de/fotos/drei-schwarze-fernbedienungen-auf-holztisch-HprPUHnjDgk?utm_content=creditCopyText&utm_medium=referral&utm_source=unsplash">Unsplash</a>  
Foto von <a href="https://unsplash.com/de/@ymoran?utm_content=creditCopyText&utm_medium=referral&utm_source=unsplash">Yucel Moran</a> auf <a href="https://unsplash.com/de/fotos/schwarze-fernbedienung-auf-weissem-textil-LJW-blAKI98?utm_content=creditCopyText&utm_medium=referral&utm_source=unsplash">Unsplash</a>
:::

:::
:::

Hier gilt ganz besonders: [Simplify to Clarify]{.highlight}


## Funktionelles Design {.nostretch}

:::{.columns}

::: {.column width="67.5%"}
![](./images/map.png)

::: image-ref
Foto von <a href="https://www.bvg.de/.imaging/mte/bvg-theme/zoomed3000w/dam/BVG-Bilder/Verbindungen/netz-ab-01-a.jpg/jcr:content/netz-ab-01-a.jpg">BVG</a>
:::

:::

:::{.column width="32.5%"}
![](./images/fahrplan-tabelle.png)

::: image-ref
Foto von <a href="https://www.bvg.de/de/verbindungen/linienuebersicht">BVG</a>
:::

:::
:::

::: {.callout-tip}
Dabei kann es helfen, sich von bereits vorhandenen Plots inspirieren zu lassen.  
Handschriftliche Skizze ist auch erstmal hilfreich!
:::



## Simplify to clarify: Data-ink ratio

::: .quote
Data graphics should draw the viewer's attention to the sense and substance of the data, not to something else. [@tufte1983visual]
:::

Auf die Spitze getrieben von @tufte1983visual: 


::: {.columns}
::: {.column width="50%"}
Data-ink ratio = Data-ink / Total ink used to print the graphic

- Jedes Stück Tinte sollte einen Grund haben.  

:::
::: {.column width="50%"}

![](./images/eeg.png)
:::{.image-ref}
<a href="https://creativecommons.org/licenses/by-sa/2.0" title="Creative Commons Attribution-Share Alike 2.0">CC BY-SA 2.0</a>, <a href="https://commons.wikimedia.org/w/index.php?curid=845554">Link</a>
:::
:::
:::

## Data-ink ratio in Praxis


::: {.columns}
::: {.column width="33%"}

10% Daten, 90 % Achsenbeschriftungen und Hintergrundlinien

::: {.panel-tabset}

### Plot

```{r}
#| echo: false
#| label: excel_plot
 

library(ggthemes)

ggplot(
  data = gapminder_2020,
  mapping = aes(x = gini, y = hapiscore_whr, color = world_4region)
) +
  geom_point() +
  theme_excel() +
  scale_x_continuous(
    breaks = scales::pretty_breaks(n = 10), # ensure ticks
    minor_breaks = waiver() # ensures minor ticks too
  ) +
  scale_y_continuous(
    breaks = scales::pretty_breaks(n = 10),
    minor_breaks = waiver()
  ) +
  theme(
    panel.grid.major = element_line(color = "grey60", size = 1.2), # thick major grid
    panel.grid.minor = element_line(color = "grey60", size = 0.8) # thick minor grid
  )
```

### Code

```{r}
#| eval: false
#| label: excel_plot
```

:::


:::

::: {.column width="33%"}
:::{.fragment}


0% Daten (Plotte die Daten, keine Zusammenfassungen)

::: {.panel-tabset}
### Plot
```{r}
#| echo: false
#| label: mean_plot

ggplot(
  data = gapminder_2020,
  mapping = aes(x = gini, y = hapiscore_whr, color = world_4region)
) +
  geom_smooth()
```

### Code
```{r}
#| eval: false
#| label: mean_plot

```
:::

:::

:::

::: {.column width="33%"}

::: {.fragment}
ca. 90 % Daten, 10 % Achsenbeschriftungen und Legende

::: {.panel-tabset}
### Plot
```{r}
#| echo: false
#| label: tufte_plot

library(ggthemes)
ggplot(
  data = gapminder_2020,
  mapping = aes(x = gini, y = hapiscore_whr, color = world_4region)
) +
  geom_point() +
  theme_tufte()
```

### Code
```{r}
#| eval: false
#| label: tufte_plot

```
:::
:::
:::
:::

## Redundanzen 

::: {.quote}
Erase non-data-ink, within reason. Erase redundant data-ink, within reaseon [@tufte1983visual]
:::


::: .{exercise}
::: {.panel-tabset}

### Frage

Auf wie viele Arten wird hier die Höhe der CO2 Emissionen pro Kopf dargestellt?

```{r}
#| echo: false
#| fig-height: 4

ggplot(
  gapminder_2020[1:10, ],
  aes(x = reorder(country, co2_pcap_cons), y = co2_pcap_cons, fill = co2_pcap_cons, color = co2_pcap_cons, label = round(co2_pcap_cons), 2)
) +
  geom_bar(stat = "identity", width = 1, color = "black") +
  geom_text(vjust = -1, color = "black") +
  theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
  labs(
    x = "Land",
    y = "CO2 Consumption per capita in t"
  ) +
  theme_bg()
```

### Antwort

Auf [sieben]{.highlight} verschiedene Arten: 

1. Höhe der linken Balkenlinie
2. Höhe der rechten Balkenlinie
3. Höhe der horizontalen Balkenlinie
4. Höhe des Balkeninneren
5. Farbe des Balkens
6. Position des Labels
7. Wert des Labels

Balken an sich enthalten also schon redundante Informationen!

:::
:::

## 
::: .exercise


::: {.panel-tabset}

### Aufgabe

Entferne alle Redundanzen, machen den Plot also "Tufte-Komform" 
```{r}
#| eval: false

ggplot(
  gapminder_2020[1:10, ],
  aes(x = reorder(country, co2_pcap_cons), y = co2_pcap_cons, fill = co2_pcap_cons, color = co2_pcap_cons, label = round(co2_pcap_cons), 2)
) +
  geom_bar(stat = "identity", width = 1, color = "black") +
  geom_text(vjust = -1, color = "black") +
  theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
  labs(
    x = "Land",
    y = "CO2 Consumption per capita in t") +
  theme_bg()
```

### Antwort

::: {.panel-tabset}

#### Antwort 1

Entfernen der Achsenlinien und Umrandungen. Hintergrundlinien werden innerhalb der Balken dargestellt. 

```{r}
#| echo: false

library(ggthemes)

ggplot(
  gapminder_2020[1:10, ],
  aes(x = reorder(country, co2_pcap_cons), y = co2_pcap_cons)
) +
  geom_bar(stat = "identity", width = 0.5, color = NA, fill = "grey") +
  geom_hline(yintercept = seq(0, 30, by = 5), color = "white", size = 0.3) +
  theme(axis.text.x = element_text(angle = 90, hjust = 1), axis.ticks = element_blank()) +
  labs(
    x = "Land",
    y = "CO2 Consumption per capita in t"
  ) +
  theme_tufte()
```


#### Antwort 2

Mitunter können die vertikalen und horizontalen Linien auch hilfreich beim Vergleich/bei der Zuordnung zum Land sein: ["Tufte Barchart"]{.highlight}

```{r}
#| echo: false
library(ggplot2)

ggplot(
  gapminder_2020[1:10, ],
  aes(x = reorder(country, co2_pcap_cons), y = co2_pcap_cons)
) +
  # vertikale Linie, leicht nach links geschoben
  geom_segment(
    aes(xend = reorder(country, co2_pcap_cons), y = 0, yend = co2_pcap_cons),
    position = position_nudge(x = -0.14)
  ) +
  geom_segment(aes(
    x = as.numeric(reorder(country, co2_pcap_cons)) - 0.15,
    xend = as.numeric(reorder(country, co2_pcap_cons)) + 0.15,
    y = co2_pcap_cons, yend = co2_pcap_cons
  )) +
  ylim(c(0, 30)) +
  labs(
    x = "Land",
    y = "CO2 Consumption per capita in t"
  ) +
  theme_tufte() +
  theme(axis.text.x = element_text(angle = 90, hjust = 1))
```

:::
:::


:::

## Maximieren von Informationen

::: {.columns}

::: {.column width = "50%"}
### Normaler Scatterplot

Box um den Plot, Grid-Linien, Achsen-Ticks: Alles keine Daten. 

::: {.panel-tabset}

### Plot

```{r}
#| label: normal_scatter
#| echo: false
ggplot(
  data = gapminder_2020,
  mapping = aes(x = gini, y = hapiscore_whr, color = world_4region)
) +
  geom_point() 
```

### Code

```{r}
#| label: normal_scatter
#| eval: false

```

:::
:::

::: {.column width = "50%"}


### Tufte-Scatterplot

Nutzen der Ticks und Achsen-Linien, um Informationen zu transportieren. 

::: {.panel-tabset}

### Plot

``` {r}
#| echo: false
#| label: tufte_scatter

library(paletteer)


xlim_v <- c(20, 80)
ylim_v <- c(20, 80)

# Parameter: Anzahl der Quantile, Versatz von den Rändern, kleine Lücke zwischen Segmenten
probs <- seq(0, 1, by = 0.25) # Quartile; für Dezile: by = 0.1
off_x <- 0 # Versatz der "y-Achse" nach rechts
off_y <- 0 # Versatz der "x-Achse" nach oben
gap <- 0.2 # kleine Lücke an Segmentenden (optisch schöner)

qx <- quantile(gapminder_2020$gini, probs = probs, na.rm = TRUE)
qy <- quantile(gapminder_2020$hapiscore_whr, probs = probs, na.rm = TRUE)

# Segment-Dataframes bauen (pro Intervall ein Segment)
seg_x <- tibble(
  x    = pmax(qx[-length(qx)] + gap / 2, xlim_v[1]),
  xend = pmin(qx[-1] - gap / 2, xlim_v[2]),
  y    = ylim_v[1] + off_y,
  yend = ylim_v[1] + off_y
) %>% filter(x < xend)

seg_y <- tibble(
  x    = xlim_v[1] + off_x,
  xend = xlim_v[1] + off_x,
  y    = pmax(qy[-length(qy)] + gap / 2, ylim_v[1]),
  yend = pmin(qy[-1] - gap / 2, ylim_v[2])
) %>%
  filter(y < yend)

ggplot(
  data = gapminder_2020,
  mapping = aes(x = gini, y = hapiscore_whr, color = world_4region)
) +
  geom_point() +
  # Quantil-"x-Achse" (horizontal) leicht ins Panel versetzt
  geom_segment(
    data = seg_x,
    aes(x = x, xend = xend, y = y, yend = yend),
    inherit.aes = FALSE
  ) +
  # Quantil-"y-Achse" (vertikal) leicht ins Panel versetzt
  geom_segment(
    data = seg_y,
    aes(x = x, xend = xend, y = y, yend = yend),
    inherit.aes = FALSE
  ) +
  scale_x_continuous(breaks = unique(c(round(seg_x$x, 0), round(seg_x$xend, 0)))) +
  scale_y_continuous(breaks = unique(c(round(seg_y$y, 0), round(seg_y$yend, 0)))) +
  coord_cartesian(xlim = xlim_v, ylim = ylim_v, expand = FALSE) +
  theme_tufte() +
  theme(axis.ticks = element_blank()) +
  paletteer::scale_colour_paletteer_d("fishualize::Koumansetta_rainfordi")
```

### Code

```{r}
#| label: tufte_scatter
#| eval: false
```

:::
:::
:::



## Verteilungen Plotten

\
\
\

Reduzieren heißt nicht, die Informationen zu reduzieren, sondern den Chart-Junk!  
Sehr oft macht es Sinn, [die gesamte Verteilung zu plotten]{.highlight}, möglicherweise auch [zusätzlich]{.highlight} zu zusammenfassenden Statistiken.

## Verteilungen plotten

::: {.columns}
::: {.column width = "50%"}

### Boxplot

::: {.panel-tabset}

### Plot

```{r}
#| label: boxplot_happy
#| echo: false

ggplot(data = gapminder_2020 %>% drop_na(country),
  aes(x = world_4region, y = hapiscore_whr, fill = world_4region)) +
  geom_boxplot() +
  theme(axis.ticks = element_blank(), legend.position = "none") +
  scale_fill_paletteer_d("fishualize::Koumansetta_rainfordi") +
  xlab("Region") +
  ylab("Happiness Score (World Happiness Report)")
```

### Code 

```{r}
#| label: boxplot_happy
#| eval: false

```
:::
:::

::: {.column width = "50%"}

### Tufte-Boxplot

::: {.panel-tabset}

### Plot

```{r}
#| echo: false
#| label: tufte-box

library(ggthemes)

ggplot(data = gapminder_2020 %>% drop_na(country), 
  aes(x = world_4region, y = hapiscore_whr, group = world_4region)) +
geom_jitter(alpha = 0.5, color = "lightgrey") + 
  geom_tufteboxplot() +
  scale_fill_paletteer_d("fishualize::Koumansetta_rainfordi") +
  xlab("Region") +
  ylab("Happiness Score (World Happiness Report)") +
theme_tufte()
```

### Code

```{r}
#| label: tufte-box
#| eval: false
```
:::
:::
:::

## Keine Angst vor leerem Raum

```{r}
#| echo: false
#| eval: false
#| 

library(rvest)
library(httr)
library(polite)

url <- "https://en.wikipedia.org/wiki/Gun_ownership"
url_bow <- polite::bow(url)
url_bow

firearm_df <- polite::scrape(url_bow) %>%
  rvest::html_nodes("table.wikitable") %>%
  rvest::html_table(fill = TRUE) %>%
  as.data.frame() %>%
  rename(country = "Countries.and.territories", "guns" = "Estimate.of.civilian.firearms.per.100.people") %>%
  select(country, guns)

saveRDS(firearm_df, here::here("sessions", "good_plots", "data", "firearm_df.rds"))
```

```{r}
#| echo: false

firearm_df <- readRDS(here::here("sessions", "good_plots", "data", "firearm_df.rds"))
df <- data.frame(
  country = c("United States", "Germany", "France", "Canada", "Finland", "Austria", "Australia", "Italy", "Netherlands", "Switzerland"),
  mass_shootings = c(109, 5, 6, 4, 3, 2, 1, 2, 2, 2)
) %>%
  left_join(firearm_df) %>%
  mutate(labels = case_when(
    country == "United States" ~ "USA",
    country == "Germany" ~ "Germany",
    country == "Switzerland" ~ "Switzerland",
    country == "Netherlands" ~ "Netherlands",
    TRUE ~ NA
  ))
```


```{r}
#| echo: false
#| fig-height: 4
#| fig-width: 7

ggplot(
  data = df,
  aes(x = guns, y = mass_shootings, label = labels)
) +
  geom_point(aes(colour = ifelse(country == "United States", "USA", "noUSA")), size = 4) +
  scale_colour_manual(values = c("lightgrey", "red")) +
  geom_text_repel(vjust = -3, size = 5, color = "#01364C") +
  theme_bg() +
  theme(legend.position = "none") +
  xlab("Guns per 100 Civilians") +
  ylab("Number of Mass Shootings 2002 - 2022")
```


::: {.image-ref}
Data from [Rockefeller Institute](https://rockinst.org/blog/public-mass-shootings-around-the-world-prevalence-context-and-prevention/) and [Wikipedia](https://en.wikipedia.org/wiki/Gun_ownership). 
:::


## Zusammenfassung

\
\

1. Above all else show the data. 
1. Maximize the data-ink ratio, within reason.
1. Erase non-data-ink, within reason.
1. Erase redundant data-ink, within reason.
1. Revise and edit.

::: image-ref
Aus @tufte1983visual. 
:::



## Gegenentwurf: Ästhetik {background-color="black"}

![](./images/space.png){.lightbox}

::: {.image-ref}
Abbildung ovn [Cédric Scherer]https://www.behance.net/gallery/100683383/Travelling-to-Outer-Space#).

:::





## 
::: .exercise
Wandelt euren Plot in einen Tufte-Plot um. 
:::


## Farben als Design-Element

::: {.columns}
::: {.column width="50%"}


![](./images/farbkreis.png)

:::
::: {.column width="50%"}

::: {.quote}
All colors are the friends of their neighbors and the lovers of their opposites. - Marc Chagall 
::: 

:::
:::

::: image-ref
Nach <a href="https://de.wikipedia.org/wiki/User:MalteAhrens" class="extiw" title="de:User:MalteAhrens">MalteAhrens</a> at <a class="external text" href="https://de.wikipedia.org">de.wikipedia</a>. Vectorization by <a href="//commons.wikimedia.org/wiki/User:SidShakal" title="User:SidShakal">User:SidShakal</a> - Raster version from Wikimedia Commons., Gemeinfrei, <a href="https://commons.wikimedia.org/w/index.php?curid=3574696">Link</a>
:::

## Kleine Farbenlehre

:::{.columns}
:::{.column width="50%"}

![](./images/zoeaaf.jpg)

::: image-ref
<a href="https://commons.wikimedia.org/wiki/File:De_zoeaaf_-_s0067V1962_-_Van_Gogh_Museum.jpg">Vincent van Gogh</a>, Public domain, via Wikimedia Commons
:::
:::

:::{.column width="50%"}
- Gegenüberliegende Farben intensivieren sich gegenseitig: eine Primärfarbe, und eine Sekundärfarbe, die aus den anderen beiden Primärfarben gemischt wird. Das erzeugt stärkere Kontraste. (Van Gogh bild)
- Mit weiß und schwarz lassen sich die Schattierungen hinzumischen
- triadisches Farbschema: Fom MIttelpunkt des Farbkreises Strahlen mit gleichem Winkel abgehen lassen (So viele, wie man Farben haben will). Das wählt dann Farben mit dem größten Kontrast aus. 
(https://www.kunstplaza.de/fashion-design/farbenlehre-farbtheorie-styleguides-fashion-design/)

:::
:::



## Weiter Tools

::: {.columns}

::: {.column width="50%"}

![](./images/hue_box.jpg)

::: .image-ref
Wollbox von Vincent van Gogh, mit der er Farbkombinationen getestet hat. Eigenes Bild. 
:::
:::

::: {.column width ="50%"}
\
\
- [Colorbrewer](https://colorbrewer2.org/#type=sequential&scheme=BuGn&n=3)
- [Huemint](https://huemint.com/)
- [Pinterest](https://de.pinterest.com/cereusart/color-palettes/)

:::
:::


## Schriften

Die Schriftart kann einer Abbildung ein ganz anderes Aussehn vereleihen.  
Wir nutzen Schriftarten von [Google Fonts]()



```{r}
#| eval: false

library(showtext)

font_add_google("Special Elite", family = "special")
```

::: {.image-ref}
Daten von [zygmuntz](https://github.com/zygmuntz/goodbooks-10k). 
:::

## 

```{r}
#| output-location: column
#| fig-width: 7
#| fig-height: 10

library(ggwordcloud)

tags <- read.csv(here::here("data", "goodbooks-10k", "tags.csv"))
book_tags <- read.csv(here::here("data", "goodbooks-10k", "book_tags.csv"))
books <- read.csv(here::here("data", "goodbooks-10k", "books.csv")) 


classics <- book_tags %>% 
left_join(books) %>%
left_join(tags) %>% 
filter(tag_name == "classics") %>% 
filter(ratings_count > 20000, !duplicated(authors)) %>%
  select(original_title, average_rating, tag_name, ratings_count) %>%
  distinct() %>% 
  arrange(ratings_count) %>%
  slice_tail(n = 50)


set.seed(45)
ggplot(data = classics, 
       mapping = aes(label = original_title, size = average_rating)) +
  geom_text_wordcloud() +
scale_size(range = c(1, 6)) +
labs(title = "What to read next ...", 
subtitle = "... according to goodreads") +
theme_bg()

```

## 
```{r}
#| fig.showtext: TRUE
#| output-location: column
#| fig-width: 7
#| fig-height: 10

font_add_google("Special Elite", family = "my textfont")
font_add_google("Playfair Display")

showtext_auto()


set.seed(45)
ggplot(data = classics, 
       mapping = aes(label = original_title, size = average_rating)) +
  geom_text_wordcloud(family = "my textfont") +
scale_size(range = c(1, 6)) +
labs(title = "What to read next", 
subtitle = "According to goodreads") +
theme_bg() +
theme(title = element_text(family = "Playfair Display", size = 20), 
)
```


##

::: {.exercise}
Suche dir eine Schriftart aus [Google Fonts](https://fonts.google.com/) und baue sie in deinen Plot ein.
:::

## Übung

::: {.exercise}
Wähle eine Grafik von ... aus und erstelle einen Plan, wie du sie verbessern würdest. 
:::

## Literatur
