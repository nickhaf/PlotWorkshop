---
title: "Was ist eine gute Grafik?"
format: letterbox-revealjs
---

```{r}
#| echo: false
library(quartets)
library(tidyverse)
source(here::here("src", "themes.R"))
```


## 

![](./images/mcCandless.png)
::: aside

:::

## Eine gute Grafik sollte ...

... eine Geschichte erzählen
... helfen, Zusammenhänge in den Grafiken zu erkennen und zu kommunizieren
... die Zusammenhänge möglichst "umfänglich" darzustellen. 

## Datasaurus Dozen ([`quartets`-Paket](https://github.com/r-causal/quartets))

```{r}
#| echo: false

datasaurus_dozen |>
  group_by(dataset) |>
  summarise(mean_x = mean(x),
            var_x = var(x),
            mean_y = mean(y),
            var_y = var(y),
            cor = cor(x, y)) |>
  knitr::kable(digits = 2)
```

## 

```{r}
#| echo: false
#| fig-height: 8
#| fig-width: 12

ggplot(datasaurus_dozen, aes(x = x, y = y)) +
  geom_smooth(method = "lm", formula = "y ~ x") +
  facet_wrap(~dataset) +
  theme_bg() +
  ylim(0, 100)

```

## 

```{r}
#| echo: false
#| fig-height: 8
#| fig-width: 12


ggplot(datasaurus_dozen, aes(x = x, y = y)) +
  geom_smooth(method = "lm", formula = "y ~ x") +
  facet_wrap(~dataset, ncol = 5) +
  geom_point() +
  theme_bg() +
  ylim(0, 100)


```


## Verteilungen Plotten

## Eine Grafik ist kann nur einen Teil der Zusammenhänge darstellen

Im  Schlechtesten Fall für Manipulation nutzbar



## Black swann

## Was mögt ihr an dieser Grafik/nicht?


## Plot-Typen

## Choosing the correct plot
https://www.data-to-viz.com/

## Pulikum

## Geschichte
- Gleiche sache auf verschiedene Arten darstellen -> was wirkt am meisten?  


## Purpose
- Exploratory vs. Explanatory
- Kann oft über reines Zeigen der Daten hinausgehen. 


## 

```{r}
#| echo: false
#| eval: false

library(rvest)
library(httr)
library(polite)

url <- "https://en.wikipedia.org/wiki/Gun_ownership"
url_bow <- polite::bow(url)
url_bow

firearm_df <- polite::scrape(url_bow) %>% 
  rvest::html_nodes("table.wikitable") %>% 
  rvest::html_table(fill = TRUE) %>% 
  as.data.frame() %>% 
  rename(country = "Countries.and.territories", "guns" = "Estimate.of.civilian.firearms.per.100.people") %>% 
  select(country, guns)

saveRDS(firearm_df, here::here("sessions", "good_plots","data", "firearm_df.rds"))
```

```{r}
#| echo: false

firearm_df <- readRDS(here::here("sessions", "good_plots","data", "firearm_df.rds"))
df <- data.frame(
  country = c("United States", "Germany", "France", "Canada", "Finland", "Austria", "Australia", "Italy", "Netherlands", "Switzerland"), 
  mass_shootings = c(109, 5, 6, 4, 3, 2, 1, 2, 2, 2)) %>% 
  left_join(firearm_df) %>% 
  mutate(labels = case_when(country == "United States" ~ "USA", 
                            country == "Germany" ~ "Germany", 
                            country == "Switzerland" ~ "Switzerland", 
                            country == "Netherlands" ~ "Netherlands", 
                            TRUE ~ NA))
```


```{r}
#| echo: false
#| fig-height: 7
#| fig-width: 12

ggplot(data = df, 
       aes(x = guns, y = mass_shootings, label = labels)) +
  geom_point(aes(colour = ifelse(country == "United States", "USA", "noUSA")), size = 5) +
  scale_colour_manual(values = c("lightgrey", "red")) +
  geom_text(vjust = 2, size = 5, color = '#01364C') +
  theme_bg() +
  theme(legend.position="none") +
  xlab("Guns per 100 Civilians") +
  ylab("Number of Mass Shootings 2002 - 2022")
```


::: aside
Data from [Rockefeller Institute](https://rockinst.org/blog/public-mass-shootings-around-the-world-prevalence-context-and-prevention/) and [Wikipedia](https://en.wikipedia.org/wiki/Gun_ownership). 
:::


## Tufte


## Caveats
https://www.data-to-viz.com/caveats.html

Immer einen Plot zeigen, dann zusammen überlgen was daran schlecht ist, was verbessert werden kann. 




## Übung
Schlechte Grafiken verbessern: https://www.data-to-viz.com/caveats.html






