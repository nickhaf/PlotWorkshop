---
title: "Informationen"

title-slide-attributes:
  data-background-image: ./images/news.jpg
  data-background-size: cover
format: 
  letterbox-revealjs:
    code-block-height: 650px
bibliography: refs.bib
---


```{r}
#| label: Load packages
#| echo: false
#| message: false

library(here)
library(janitor)
library(ggwordcloud)
library(ggrepel)
library(ggtext)
library(tidyverse)
source(here::here("src", "themes.R"))
source(here::here("src", "functions.R"))

gapminder <- readRDS(here::here("data", "gapminder_dat.rds"))
```

## Informationen

::: {.columns}
:::{.column width="50%"}

\
\

- Integrität der [Datenquelle]{.highlight}
- Integrität der [Darstellung]{.highlight}

:::
::: {.column width="50%"}
![](./images/news.jpg){.image-right}
:::
:::

::: {.image-ref}
Foto von <a href="https://unsplash.com/de/@humayardim?utm_content=creditCopyText&utm_medium=referral&utm_source=unsplash">Hümâ H. Yardım</a> auf <a href="https://unsplash.com/de/fotos/menschen-die-tagsuber-auf-schneebedecktem-boden-spazieren-gehen-gfZZViTxuqw?utm_content=creditCopyText&utm_medium=referral&utm_source=unsplash">Unsplash</a>

:::




## Integrität der Daten 

::: {.columns}
:::{.column width="50%"}

**Garbage in, Garbage out:**

- [Scheinkorrelationen](https://tylervigen.com/spurious-correlations)
- [Sloppy research](https://journals.sagepub.com/doi/full/10.1177/0306312714535679)
- Messfehler, schlechte Daten, [Data dredging](https://tylervigen.com/spurious/correlation/2203_yogurt-consumption_correlates-with_google-searches-for-i-cant-even)

:::
::: {.column width="50%"}

![](./images/garbage_hochkant.jpg){.image-right}

:::
:::


::: image-ref
Foto von <a href="https://unsplash.com/de/@jilburr?utm_content=creditCopyText&utm_medium=referral&utm_source=unsplash">Jilbert Ebrahimi</a> auf <a href="https://unsplash.com/de/fotos/schwarzer-plastikmulleimer-mit-radern-neben-der-wand-b0p818k8Ok8?utm_content=creditCopyText&utm_medium=referral&utm_source=unsplash">Unsplash</a>. 
:::


## Scheinkorrelationen

::: {.columns}

::: {.column width="50%"}

\
\

![](./images/spurious_cor.png)

:::

::: {.column width="50%"}
![](./images/ai.png)
:::
:::

::: {.image-ref}
Grafik von [Tyler Vigen](https://tylervigen.com/spurious/correlation/2203_yogurt-consumption_correlates-with_google-searches-for-i-cant-even). 
:::

## Fehlender Kontext

::: {.columns}
:::{.column width="50%}
```{r}
#| echo: false

gapminder_2020 <- gapminder %>%
  filter(time == 2020) %>%
  drop_na(world_6region, world_4region, country, gini, hapiscore_whr) %>%
  arrange(desc(co2_cons))

ggplot(
  gapminder_2020[1:10, ],
  aes(x = reorder(country, co2_cons), y = co2_cons)
) +
  geom_bar(stat = "identity", width = 1, color = "black", fill = "#208C7A") +
  theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
  labs(
    x = "Land",
    y = "CO2 Consumption in 1000 t",
    title = "China burns the most CO2!"
  ) +
  theme_bg()
```
:::

:::{.column width="50%}
::: {.fragment}
```{r}
#| echo: false

ggplot(
  gapminder_2020[1:10, ],
  aes(x = reorder(country, co2_pcap_cons), y = co2_pcap_cons)
) +
  geom_bar(stat = "identity", width = 1, color = "black", fill = "#208C7A") +
  theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
  labs(
    x = "Land",
    y = "CO2 Consumption per capita in t",
    title = "In China leben auch die meisten Menschen!"
  ) +
  theme_bg()
```
:::
:::
:::



## {background-color="white"}

:::{.columns}

:::{.column width="10%"}

:::
:::{.column width="80%"}
![](./images/impeach.png){width="60%"}

:::
:::{.column width="10%"}

:::

:::

::: image-ref
Siehe [storymaps](https://storymaps.arcgis.com/stories/0e636a652d44484b9457f953994b212b).
:::


## {background-color="white"}

::: {.quote}
"Land doesn't vote ... People Do."
:::


:::{.columns}
::: {.column width="100%"}
![](images/land_doesnt_vote.png)
:::
:::

:::{.image-ref}
Siehe [storymaps](https://storymaps.arcgis.com/stories/0e636a652d44484b9457f953994b212b).
:::

## Daten in Kontext setzen

::: {.panel-tabset}

### Übung

::: {.exercise}

Arbeite an deinem Plot-Projekt aus den letzten Übungen:
Zeichne [Mittelwerte]{.highlight}, oder [hebe hervor]{.highlight} aus einer Vergleichsmenge, z.B. europäischer Länder. 
Am einfachsten geht das mit zwei verschiedenen Datensätzen.


::: {.callout-tip}
### Tipp

Erstellen von zwei Datensätzen:

```{r}
#| eval: false
#| code-fold: true

## Deutschland, das wird gleich in einer anderen Farbe hervorgehoben
gapminder_line <- gapminder %>%
  filter(country %in% c("deu"), time >= 1900, time <= 2024) %>%
  drop_na(gini)

## Europäische Länder
ggplot(data = gapminder_line, aes(x = time, y = gini)) +
  geom_line(aes(group = country))
```

:::

::: 

### Lösung


::: {.panel-tabset}

### Plot

```{r}
#| echo: false
#| label: gini_europe
#| fig-width: 14
#| fig-height: 10

gapminder_line <- gapminder %>%
  filter(country %in% c("deu"), time >= 1900, time <= 2024) %>%
  drop_na(gini)

gapminder_europe <- gapminder %>%
  filter(world_4region == "europe", time >= 1900, time <= 2024) %>%
  drop_na(gini)


p_line <- ggplot(data = gapminder_line, aes(x = time, y = gini)) +
  geom_line(data = gapminder_europe, aes(x = time, y = gini, group = country), color = "lightgrey", alpha = 0.5) +
  geom_smooth(color = "black") +
  geom_line(color = "#F4BA02", linewidth = 2) +
  theme_bg() +
  labs(
    title = "Ungleichheit in Europa On the Rise",
    subtitle = "1900 bis 2024, Gelbe Linie zeigt Deutschland",
    x = "Jahr",
    y = "Gini-Koeffizient"
  )

p_line
```

### Code
```{r}
#| label: gini_europe
#| eval: false
```

:::


:::



## Achsen: Konventionen

::: fragment
::: {.callout-important}
Konventionen beachten! Die y-Achse sollte bspw. in der Regel bei 0 beginnen.
:::
:::

::: {.columns}
::: {.column width="50%"}
![](./images/florida.jpeg){width="75%"}
:::
::: {.column width="50%"}

::: {.small}
776.013 Home protection; use or threatened use of deadly force; presumption of fear of death or great bodily harm.—
(1) A person who is in a dwelling or residence in which the person has a right to be has no duty to retreat and has the right to stand his or her ground and use or threaten to use:  
(a) Nondeadly force against another when and to the extent that the person reasonably believes that such conduct is necessary to defend himself or herself or another against the other’s imminent use of unlawful force; or  
(b) Deadly force if he or she reasonably believes that using or threatening to use such force is necessary to prevent imminent death or great bodily harm to himself or herself or another or to prevent the imminent commission of a forcible felony.

([Florida Statutes](http://www.leg.state.fl.us/statutes/index.cfm?App_mode=Display_Statute&URL=0700-0799/0776/Sections/0776.013.html))

:::
:::
:::


## Manipulation des Bildformats


```{r}
#| label: example-weight
#| fig-width: 14
#| fig-height: 7
#| echo: false

set.seed(42)
my_weight <- data.frame(
  month = factor(c("Januar", "Februar", "März", "April", "Mai", "Juni", "Juli", "August", "September", "Oktober", "November", "Dezember"),
    levels = c("Januar", "Februar", "März", "April", "Mai", "Juni", "Juli", "August", "September", "Oktober", "November", "Dezember"),
    ordered = TRUE
  ),
  weight = rnorm(12, 90, 5) / 1000,
  group = rep(1, 12)
)

ggplot(
  my_weight,
  aes(x = month, y = weight, group = group)
) +
  geom_point() +
  geom_line() +
  labs(
    title = "Mein Gewicht 2024",
    subtitle = "In metrischen Tonnen",
    x = "Monat",
    y = "Gewicht in t"
  ) +
  ylim(0, 1000) +
  theme_bg() +
  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1))
```




## {background-color="white"}

::: {.quote}
The designer of the visualization, by selecting a y-axis starting point, has control over the subjective importance of the resulting differences.  
[@correll2020truncating]
:::


::: {.columns}
::: {.column width="100%"}
![](./images/gee-whiz.png){width="70%"}
:::
:::

::: image-ref
Grafik aus @HuffDarrell1979Htlw, heruntergeladen von [Observable blog](https://observablehq.com/blog/never-okay-crop-y-axis-except-when-it-is).
:::



## Setzen der Achsenlimits

:::{.columns}
::::{.column width="50%"}

`y_lim()`: Entfernt außerhalb liegende Werte.

::::: {.panel-tabset}


### Code

```{r}
#| eval: false
#| label: no_0
#| code-line-numbers: "11"

ggplot(data = gapminder_line, aes(x = time, y = gini)) +
  geom_smooth(color = "black") +
  geom_line(color = "#F4BA02", linewidth = 2) +
  theme_bg() +
  labs(
    title = "Ungleichheit in Deutschland On the Rise!",
    subtitle = "1900 bis 2024, schwarze Linie zeigt europäischen Durchschnitt",
    x = "Jahr",
    y = "Gini-Koeffizient"
  ) + 
ylim(c(30, 40))
```

### Plot
```{r}
#| echo: false
#| label: no_0
```

:::::

::::

::::{.column width="50%"}


`coord_cartesian()`: Entfernt die Werte nicht, zoomt quasi rein. 


::::: {.panel-tabset}

### Code

```{r}
#| eval: false
#| label: with_0
#| code-line-numbers: "11"


ggplot(data = gapminder_line, aes(x = time, y = gini)) +
  geom_smooth(color = "black") +
  geom_line(color = "#F4BA02", linewidth = 2) +
  theme_bg() +
  labs(
    title = "Ungleichheit in Deutschland On the Rise!",
    subtitle = "1900 bis 2024, schwarze Linie zeigt europäischen Durchschnitt",
    x = "Jahr",
    y = "Gini-Koeffizient"
  ) + 
  coord_cartesian(ylim = c(30, 40))
```

### Plot
```{r}
#| echo: false
#| label: with_0
```

:::::

::::
:::

## Soll die Null geplottet werden?

:::{.columns}
:::{.column width="50%"}

```{r}
#| echo: false

ggplot(data = gapminder_line, aes(x = time, y = gini)) +
  geom_smooth(color = "black") +
  geom_line(color = "#F4BA02", linewidth = 2) +
  theme_bg() +
  labs(
    title = "Ungleichheit in Deutschland On the Rise!",
    subtitle = "1900 bis 2024, schwarze Linie zeigt europäischen Durchschnitt",
    x = "Jahr",
    y = "Gini-Koeffizient"
  )
```

:::
:::{.column width="50%"}
```{r}
#| echo: false

ggplot(data = gapminder_line, aes(x = time, y = gini)) +
  geom_smooth(color = "black") +
  geom_line(color = "#F4BA02", linewidth = 2) +
  theme_bg() +
  labs(
    title = "Ungleichheit in Deutschland relativ stabil",
    subtitle = "1900 bis 2024, schwarze Linie zeigt europäischen Durchschnitt",
    x = "Jahr",
    y = "Gini-Koeffizient"
  ) +
  coord_cartesian(ylim = c(0, 100))
```

:::
:::




## Absolute Werte

Die Null sollte in der Regel mitgeplottet werden, da wir uns Mengen anschauen. 

:::{.columns}
:::{.column width="50%"}

```{r}
#| echo: false

ggplot(
  gapminder_2020[1:10, ] %>%
    arrange(desc(co2_pcap_cons)),
  aes(x = reorder(country, co2_pcap_cons), y = co2_pcap_cons)
) +
  geom_bar(stat = "identity", width = 1, color = "black", fill = "#208C7A") +
  theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
  labs(title = "CO2 consumption per capita in the biggest emmiting countries") +
  coord_cartesian(ylim = c(15, 25)) +
  theme_bg()
```

:::
:::{.column width="50%"}

:::{.fragement}
```{r}
#| echo: false

ggplot(
  gapminder_2020[1:10, ],
  aes(x = reorder(country, co2_pcap_cons), y = co2_pcap_cons)
) +
  geom_bar(stat = "identity", width = 1, color = "black", fill = "#208C7A") +
  theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
  labs(title = "CO2 consumption per capita in the biggest emmiting countries") +
  theme_bg()
```
:::
:::
:::

## Veränderung der Werte

Hier ist es eher eine [Ermessensfrage]{.highlight}:

::: {.columns}
:::{.column width="50%"}
\
\

::: {.quote}
If zero is in the neighborhood, invite it in!

::: {.small}
[Andrew Gelman](https://statmodeling.stat.columbia.edu/2021/12/17/graphing-advice-if-zero-is-in-the-neighborhood-invite-it-in/)
:::
:::

:::

::: {.column width="50%"}

\
\

::: {.quote}
In general, in a time-series, use a baseline that shows the data not the zero point. 

::: {.small}
@tufte1983visual
:::
:::
:::
:::


## Veränderung der Werte
::: {.columns}
:::{.column width="50%"}

```{r}
#| echo: false

gapminder_2020_de <- gapminder %>%
  filter(time >= 2000, time <= 2022, country == "deu") %>%
  arrange(desc(co2_pcap_cons))


ggplot(
  gapminder_2020_de,
  aes(x = time, y = co2_pcap_cons, group = country, colour = country)
) +
  geom_line(linewidth = 1.5) +
  theme_bg() +
  ylim(9, 14) +
  scale_color_manual(values = "#208C7A") +
  labs(title = "CO2 consumption per capita in Germany")
```

:::

:::{.column width="50%"}

```{r}
#| echo: false

ggplot(
  gapminder_2020_de,
  aes(x = time, y = co2_pcap_cons, group = country, colour = country)
) +
  geom_line(linewidth = 1.5) +
  theme_bg() +
  ylim(0, 15) +
  scale_color_manual(values = "#208C7A") +
  labs(title = "CO2 consumption per capita in Germany")
```

:::
:::

## Schneiden von Achsen

::: {.callout-warning}
In der Regel keine gute Idee! Verzerrt die Skala. 
:::

:::{.columns}
:::{.column width="50%}

```{r}
#| echo: false

library(ggbreak)



ggplot(
  gapminder_2020[1:10, ],
  aes(x = reorder(country, co2_cons), y = co2_cons)
) +
  geom_bar(stat = "identity", width = 1, color = "black", fill = "#208C7A") +
  theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
  labs(
    title = "CO2 consumption",
    subtitle = "Biggest emmiting countries"
  ) +
  scale_y_break(c(1500, 5000)) +
  theme_bg() +
  xlab("Land") +
  ylab("CO2 consumption in 1000 t")
```
:::


:::{.column width="50%}
::: fragment
```{r}
#| echo: false
ggplot(
  gapminder_2020[1:10, ] %>%
    arrange(desc(co2_pcap_cons)),
  aes(x = reorder(country, co2_cons), y = co2_cons)
) +
  geom_bar(stat = "identity", width = 1, color = "black", fill = "#208C7A") +
  theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
  labs(
    title = "CO2 consumption",
    subtitle = "Biggest emmiting countries"
  ) +
  theme_bg() +
  xlab("Land") +
  ylab("CO2 consumption in 1000 t")
```
:::
:::
:::

## Übung

::: {.exercise}
Legt für euren Plot aus den vorherigen Übungen die Skalenlimits fest. Begründet eure Entscheidung.

:::

## Literatur

      
